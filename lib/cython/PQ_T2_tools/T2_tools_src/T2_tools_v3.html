<!DOCTYPE html>
<!-- Generated by Cython 0.19.2 on Tue Dec 06 18:30:41 2016 -->
<html>

<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<style type="text/css">

body { font-family: courier; font-size: 12; }

.code  { font-size: 9; color: #444444; display: none; margin-left: 20px; }
.py_c_api  { color: red; }
.py_macro_api  { color: #FF7000; }
.pyx_c_api  { color: #FF3000; }
.pyx_macro_api  { color: #FF7000; }
.refnanny  { color: #FFA000; }

.error_goto  { color: #FFA000; }

.tag  {  }

.coerce  { color: #008000; border: 1px dotted #008000 }

.py_attr { color: #FF0000; font-weight: bold; }
.c_attr  { color: #0000FF; }

.py_call { color: #FF0000; font-weight: bold; }
.c_call  { color: #0000FF; }

.line { margin: 0em }

</style>
<script>
function toggleDiv(id) {
    theDiv = document.getElementById(id);
    if (theDiv.style.display != 'block') theDiv.style.display = 'block';
    else theDiv.style.display = 'none';
}
</script>
</head>
        <body>
<p>Generated by Cython 0.19.2 on Tue Dec 06 18:30:41 2016
<p>Raw output: <a href="T2_tools_v3.c">T2_tools_v3.c</a>
<pre class='line' style='background-color: #FFFF79' onclick='toggleDiv("line1")'> 1: """</pre>
<pre id='line1' class='code' style='background-color: #FFFF79'>
  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":1
 * """             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 * Cython-based fast data analysis for raw data obtained with the HH or TH in T2 mode.
 * 
 */
  __pyx_t_1 = <span class='py_c_api'>PyDict_New</span>();<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((PyObject *)__pyx_t_1));
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s____test__, ((PyObject *)__pyx_t_1)) &lt; 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 1; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_t_1)); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line2")'> 2: Cython-based fast data analysis for raw data obtained with the HH or TH in T2 mode.</pre>
<pre id='line2' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line3")'> 3: </pre>
<pre id='line3' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line4")'> 4: authors:</pre>
<pre id='line4' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line5")'> 5: Gerwin Koolstra</pre>
<pre id='line5' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line6")'> 6: Wolfgang Pfaff</pre>
<pre id='line6' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line7")'> 7: </pre>
<pre id='line7' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line8")'> 8: 2014: Bas Hensen :</pre>
<pre id='line8' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line9")'> 9:     - NOTE THESE FILES DO NOT WORK FOR THE PicoHARP instrument.</pre>
<pre id='line9' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line10")'> 10: Bell:</pre>
<pre id='line10' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line11")'> 11:     - Combined Histogramming and T2 measurement</pre>
<pre id='line11' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line12")'> 12: """</pre>
<pre id='line12' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line13")'> 13: </pre>
<pre id='line13' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line14")'> 14: import cython</pre>
<pre id='line14' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF8d' onclick='toggleDiv("line15")'> 15: import numpy as np</pre>
<pre id='line15' class='code' style='background-color: #FFFF8d'>
  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":15
 * 
 * import cython
 * import numpy as np             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 * cimport numpy as cnp
 * 
 */
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_Import</span>(((PyObject *)__pyx_n_s__numpy), 0, -1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 15; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s__np, __pyx_t_1) &lt; 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 15; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line16")'> 16: cimport numpy as cnp</pre>
<pre id='line16' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line17")'> 17: </pre>
<pre id='line17' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line18")'> 18: </pre>
<pre id='line18' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line19")'> 19: @cython.boundscheck(False)</pre>
<pre id='line19' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line20")'> 20: @cython.wraparound(False)</pre>
<pre id='line20' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF4b' onclick='toggleDiv("line21")'> 21: def T2_live_filter(</pre>
<pre id='line21' class='code' style='background-color: #FFFF4b'>
/* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":21
 * @cython.boundscheck(False)
 * @cython.wraparound(False)
 * def T2_live_filter(             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *     cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] time not None,
 *     cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] channel not None,
 */

static PyObject *__pyx_pf_11measurement_3lib_6cython_11PQ_T2_tools_12T2_tools_src_11T2_tools_v3_T2_live_filter(CYTHON_UNUSED PyObject *__pyx_self, PyArrayObject *__pyx_v_time, PyArrayObject *__pyx_v_channel, PyArrayObject *__pyx_v_special, PyArrayObject *__pyx_v_hist, __pyx_t_5numpy_uint64_t __pyx_v_t_ofl, __pyx_t_5numpy_uint64_t __pyx_v_t_lastsync, __pyx_t_5numpy_uint32_t __pyx_v_last_sync_number, __pyx_t_5numpy_uint64_t __pyx_v_min_sync_time, __pyx_t_5numpy_uint64_t __pyx_v_max_sync_time, __pyx_t_5numpy_uint64_t __pyx_v_min_hist_sync_time, __pyx_t_5numpy_uint64_t __pyx_v_max_hist_sync_time, __pyx_t_5numpy_uint64_t __pyx_v_wraparound, __pyx_t_5numpy_uint64_t __pyx_v_t2_time_factor, __pyx_t_5numpy_uint32_t __pyx_v_count_marker_channel) {
  __pyx_t_5numpy_uint64_t __pyx_v_marker_count_number;
  __pyx_t_5numpy_uint64_t __pyx_v_k;
  __pyx_t_5numpy_uint64_t __pyx_v_l;
  __pyx_t_5numpy_uint64_t __pyx_v_length;
  __pyx_t_5numpy_uint64_t __pyx_v__sync_time;
  PyArrayObject *__pyx_v_sync_time = 0;
  PyArrayObject *__pyx_v_hhtime = 0;
  PyArrayObject *__pyx_v_hhchannel = 0;
  PyArrayObject *__pyx_v_hhspecial = 0;
  PyArrayObject *__pyx_v_sync_number = 0;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_channel;
  __Pyx_Buffer __pyx_pybuffer_channel;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_hhchannel;
  __Pyx_Buffer __pyx_pybuffer_hhchannel;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_hhspecial;
  __Pyx_Buffer __pyx_pybuffer_hhspecial;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_hhtime;
  __Pyx_Buffer __pyx_pybuffer_hhtime;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_hist;
  __Pyx_Buffer __pyx_pybuffer_hist;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_special;
  __Pyx_Buffer __pyx_pybuffer_special;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_sync_number;
  __Pyx_Buffer __pyx_pybuffer_sync_number;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_sync_time;
  __Pyx_Buffer __pyx_pybuffer_sync_time;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_time;
  __Pyx_Buffer __pyx_pybuffer_time;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("T2_live_filter", 0);
  __pyx_pybuffer_sync_time.pybuffer.buf = NULL;
  __pyx_pybuffer_sync_time.refcount = 0;
  __pyx_pybuffernd_sync_time.data = NULL;
  __pyx_pybuffernd_sync_time.rcbuffer = &amp;__pyx_pybuffer_sync_time;
  __pyx_pybuffer_hhtime.pybuffer.buf = NULL;
  __pyx_pybuffer_hhtime.refcount = 0;
  __pyx_pybuffernd_hhtime.data = NULL;
  __pyx_pybuffernd_hhtime.rcbuffer = &amp;__pyx_pybuffer_hhtime;
  __pyx_pybuffer_hhchannel.pybuffer.buf = NULL;
  __pyx_pybuffer_hhchannel.refcount = 0;
  __pyx_pybuffernd_hhchannel.data = NULL;
  __pyx_pybuffernd_hhchannel.rcbuffer = &amp;__pyx_pybuffer_hhchannel;
  __pyx_pybuffer_hhspecial.pybuffer.buf = NULL;
  __pyx_pybuffer_hhspecial.refcount = 0;
  __pyx_pybuffernd_hhspecial.data = NULL;
  __pyx_pybuffernd_hhspecial.rcbuffer = &amp;__pyx_pybuffer_hhspecial;
  __pyx_pybuffer_sync_number.pybuffer.buf = NULL;
  __pyx_pybuffer_sync_number.refcount = 0;
  __pyx_pybuffernd_sync_number.data = NULL;
  __pyx_pybuffernd_sync_number.rcbuffer = &amp;__pyx_pybuffer_sync_number;
  __pyx_pybuffer_time.pybuffer.buf = NULL;
  __pyx_pybuffer_time.refcount = 0;
  __pyx_pybuffernd_time.data = NULL;
  __pyx_pybuffernd_time.rcbuffer = &amp;__pyx_pybuffer_time;
  __pyx_pybuffer_channel.pybuffer.buf = NULL;
  __pyx_pybuffer_channel.refcount = 0;
  __pyx_pybuffernd_channel.data = NULL;
  __pyx_pybuffernd_channel.rcbuffer = &amp;__pyx_pybuffer_channel;
  __pyx_pybuffer_special.pybuffer.buf = NULL;
  __pyx_pybuffer_special.refcount = 0;
  __pyx_pybuffernd_special.data = NULL;
  __pyx_pybuffernd_special.rcbuffer = &amp;__pyx_pybuffer_special;
  __pyx_pybuffer_hist.pybuffer.buf = NULL;
  __pyx_pybuffer_hist.refcount = 0;
  __pyx_pybuffernd_hist.data = NULL;
  __pyx_pybuffernd_hist.rcbuffer = &amp;__pyx_pybuffer_hist;
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_time.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_time, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_uint32_t, PyBUF_FORMAT| PyBUF_C_CONTIGUOUS, 1, 0, __pyx_stack) == -1))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 21; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_pybuffernd_time.diminfo[0].strides = __pyx_pybuffernd_time.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_time.diminfo[0].shape = __pyx_pybuffernd_time.rcbuffer-&gt;pybuffer.shape[0];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_channel, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_uint32_t, PyBUF_FORMAT| PyBUF_C_CONTIGUOUS, 1, 0, __pyx_stack) == -1))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 21; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_pybuffernd_channel.diminfo[0].strides = __pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_channel.diminfo[0].shape = __pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer.shape[0];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_special.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_special, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_uint32_t, PyBUF_FORMAT| PyBUF_C_CONTIGUOUS, 1, 0, __pyx_stack) == -1))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 21; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_pybuffernd_special.diminfo[0].strides = __pyx_pybuffernd_special.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_special.diminfo[0].shape = __pyx_pybuffernd_special.rcbuffer-&gt;pybuffer.shape[0];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_hist.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_hist, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_uint32_t, PyBUF_FORMAT| PyBUF_C_CONTIGUOUS| PyBUF_WRITABLE, 2, 0, __pyx_stack) == -1))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 21; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_pybuffernd_hist.diminfo[0].strides = __pyx_pybuffernd_hist.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_hist.diminfo[0].shape = __pyx_pybuffernd_hist.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_hist.diminfo[1].strides = __pyx_pybuffernd_hist.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_hist.diminfo[1].shape = __pyx_pybuffernd_hist.rcbuffer-&gt;pybuffer.shape[1];

  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":21
 * @cython.boundscheck(False)
 * @cython.wraparound(False)
 * def T2_live_filter(             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *     cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] time not None,
 *     cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] channel not None,
 */
  __pyx_k_tuple_17 = <span class='py_c_api'>PyTuple_Pack</span>(24, ((PyObject *)__pyx_n_s__time), ((PyObject *)__pyx_n_s__channel), ((PyObject *)__pyx_n_s__special), ((PyObject *)__pyx_n_s__hist), ((PyObject *)__pyx_n_s__t_ofl), ((PyObject *)__pyx_n_s__t_lastsync), ((PyObject *)__pyx_n_s__last_sync_number), ((PyObject *)__pyx_n_s__min_sync_time), ((PyObject *)__pyx_n_s__max_sync_time), ((PyObject *)__pyx_n_s__min_hist_sync_time), ((PyObject *)__pyx_n_s__max_hist_sync_time), ((PyObject *)__pyx_n_s__wraparound), ((PyObject *)__pyx_n_s__t2_time_factor), ((PyObject *)__pyx_n_s_1), ((PyObject *)__pyx_n_s__marker_count_number), ((PyObject *)__pyx_n_s__k), ((PyObject *)__pyx_n_s__l), ((PyObject *)__pyx_n_s__length), ((PyObject *)__pyx_n_s___sync_time), ((PyObject *)__pyx_n_s__sync_time), ((PyObject *)__pyx_n_s__hhtime), ((PyObject *)__pyx_n_s__hhchannel), ((PyObject *)__pyx_n_s__hhspecial), ((PyObject *)__pyx_n_s__sync_number));<span class='error_goto'> if (unlikely(!__pyx_k_tuple_17)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 21; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_k_tuple_17);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_k_tuple_17));

  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":21
 * @cython.boundscheck(False)
 * @cython.wraparound(False)
 * def T2_live_filter(             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *     cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] time not None,
 *     cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] channel not None,
 */
  __pyx_t_1 = PyCFunction_NewEx(&amp;__pyx_mdef_11measurement_3lib_6cython_11PQ_T2_tools_12T2_tools_src_11T2_tools_v3_1T2_live_filter, NULL, __pyx_n_s_20);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 21; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s__T2_live_filter, __pyx_t_1) &lt; 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 21; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_k_codeobj_18 = (PyObject*)__Pyx_<span class='py_c_api'>PyCode_New</span>(14, 0, 24, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_k_tuple_17, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_19, __pyx_n_s__T2_live_filter, 21, __pyx_empty_bytes);<span class='error_goto'> if (unlikely(!__pyx_k_codeobj_18)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 21; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line22")'> 22:     cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] time not None,</pre>
<pre id='line22' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line23")'> 23:     cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] channel not None,</pre>
<pre id='line23' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line24")'> 24:     cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] special not None,</pre>
<pre id='line24' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line25")'> 25:     cnp.ndarray[cnp.uint32_t, ndim=2, mode='c'] hist not None,</pre>
<pre id='line25' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line26")'> 26:     cnp.uint64_t t_ofl,</pre>
<pre id='line26' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line27")'> 27:     cnp.uint64_t t_lastsync,</pre>
<pre id='line27' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line28")'> 28:     cnp.uint32_t last_sync_number,</pre>
<pre id='line28' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line29")'> 29:     cnp.uint64_t min_sync_time,</pre>
<pre id='line29' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line30")'> 30:     cnp.uint64_t max_sync_time,</pre>
<pre id='line30' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line31")'> 31:     cnp.uint64_t min_hist_sync_time,</pre>
<pre id='line31' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line32")'> 32:     cnp.uint64_t max_hist_sync_time,</pre>
<pre id='line32' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line33")'> 33:     cnp.uint64_t wraparound,</pre>
<pre id='line33' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line34")'> 34:     cnp.uint64_t t2_time_factor,</pre>
<pre id='line34' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line35")'> 35:     cnp.uint32_t count_marker_channel):</pre>
<pre id='line35' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line36")'> 36:     """</pre>
<pre id='line36' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line37")'> 37:     This is a specialized form of PQ data recording, alowing to receive part of the data</pre>
<pre id='line37' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line38")'> 38:     in a histogrammed form (the data arriving between min_hist_sync_time and max_hist_sync_time),</pre>
<pre id='line38' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line39")'> 39:     and part of the data (between min_sync_time and max_sync_time) in standard - per event -</pre>
<pre id='line39' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line40")'> 40:     form. The two regions are allowed to overlap. Markers are also recorded outside these regions.</pre>
<pre id='line40' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line41")'> 41:     Finally, this function counts the occurence of markers arriving at the count_marker_channel.</pre>
<pre id='line41' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line42")'> 42: </pre>
<pre id='line42' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line43")'> 43:     This function expects as input decoded HH data:</pre>
<pre id='line43' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line44")'> 44:     - an array with time information,</pre>
<pre id='line44' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line45")'> 45:     - an array for the channel,</pre>
<pre id='line45' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line46")'> 46:     - an array containing the special bit,</pre>
<pre id='line46' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line47")'> 47:     - 1 x (N x 2) array to histogram the data in. N = max_hist_sync_time - min_hist_sync_time.</pre>
<pre id='line47' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line48")'> 48:     and overflow information:</pre>
<pre id='line48' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line49")'> 49:     - the current overflow time,</pre>
<pre id='line49' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line50")'> 50:     - and the time of the last sync. (both start with zero and get updated by</pre>
<pre id='line50' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line51")'> 51:         calls of this function).</pre>
<pre id='line51' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line52")'> 52:     - the last sync number</pre>
<pre id='line52' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line53")'> 53: </pre>
<pre id='line53' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line54")'> 54:     Returns for each event (syncs and overflows are not in the data anymore)</pre>
<pre id='line54' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line55")'> 55:     - the absolute time since msmt start (in bins)</pre>
<pre id='line55' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line56")'> 56:     - channel</pre>
<pre id='line56' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line57")'> 57:     - special bit,</pre>
<pre id='line57' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line58")'> 58:     - the updated (N x 2) histrogram array</pre>
<pre id='line58' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line59")'> 59:     - relative time to the last previous sync (in bins)</pre>
<pre id='line59' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line60")'> 60:     and overflow information (absolute overflow time and time of the last sync).</pre>
<pre id='line60' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line61")'> 61:     """</pre>
<pre id='line61' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line62")'> 62: </pre>
<pre id='line62' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line63")'> 63:     cdef cnp.uint64_t marker_count_number =0</pre>
<pre id='line63' class='code' style='background-color: #FFFFff'>
  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":63
 *     """
 * 
 *     cdef cnp.uint64_t marker_count_number =0             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *     cdef cnp.uint64_t k
 *     cdef cnp.uint64_t l = 0
 */
  __pyx_v_marker_count_number = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line64")'> 64:     cdef cnp.uint64_t k</pre>
<pre id='line64' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line65")'> 65:     cdef cnp.uint64_t l = 0</pre>
<pre id='line65' class='code' style='background-color: #FFFFff'>
  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":65
 *     cdef cnp.uint64_t marker_count_number =0
 *     cdef cnp.uint64_t k
 *     cdef cnp.uint64_t l = 0             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *     cdef cnp.uint64_t length = time.shape[0]
 *     cdef cnp.uint64_t _sync_time
 */
  __pyx_v_l = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line66")'> 66:     cdef cnp.uint64_t length = time.shape[0]</pre>
<pre id='line66' class='code' style='background-color: #FFFFff'>
  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":66
 *     cdef cnp.uint64_t k
 *     cdef cnp.uint64_t l = 0
 *     cdef cnp.uint64_t length = time.shape[0]             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *     cdef cnp.uint64_t _sync_time
 *     cdef cnp.ndarray[cnp.uint64_t, ndim=1, mode='c'] sync_time = np.empty((length,), dtype='u8')
 */
  __pyx_v_length = (__pyx_v_time-&gt;dimensions[0]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line67")'> 67:     cdef cnp.uint64_t _sync_time</pre>
<pre id='line67' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF30' onclick='toggleDiv("line68")'> 68:     cdef cnp.ndarray[cnp.uint64_t, ndim=1, mode='c'] sync_time = np.empty((length,), dtype='u8')</pre>
<pre id='line68' class='code' style='background-color: #FFFF30'>
  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":68
 *     cdef cnp.uint64_t length = time.shape[0]
 *     cdef cnp.uint64_t _sync_time
 *     cdef cnp.ndarray[cnp.uint64_t, ndim=1, mode='c'] sync_time = np.empty((length,), dtype='u8')             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *     cdef cnp.ndarray[cnp.uint64_t, ndim=1, mode='c'] hhtime = np.empty((length,), dtype='u8')
 *     cdef cnp.ndarray[cnp.uint8_t, ndim=1, mode='c'] hhchannel = np.empty((length,), dtype='u1')
 */
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s__np);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 68; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  __pyx_t_2 = __Pyx_<span class='py_c_api'>PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s__empty);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 68; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_PyInt_to_py_npy_uint64(__pyx_v_length);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 68; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 68; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_1);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_1);
  __pyx_t_1 = 0;
  __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 68; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, ((PyObject *)__pyx_t_3));
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_t_3));
  __pyx_t_3 = 0;
  __pyx_t_3 = <span class='py_c_api'>PyDict_New</span>();<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 68; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((PyObject *)__pyx_t_3));
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_3, ((PyObject *)__pyx_n_s__dtype), ((PyObject *)__pyx_n_s__u8)) &lt; 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 68; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_t_4 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_2, ((PyObject *)__pyx_t_1), ((PyObject *)__pyx_t_3));<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 68; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_t_1)); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_t_3)); __pyx_t_3 = 0;
  if (!(likely(((__pyx_t_4) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_4, __pyx_ptype_5numpy_ndarray)))))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 68; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_t_5 = ((PyArrayObject *)__pyx_t_4);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_sync_time.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_5, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_uint64_t, PyBUF_FORMAT| PyBUF_C_CONTIGUOUS| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
      __pyx_v_sync_time = ((PyArrayObject *)Py_None); <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None); __pyx_pybuffernd_sync_time.rcbuffer-&gt;pybuffer.buf = NULL;
     <span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 68; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    } else {__pyx_pybuffernd_sync_time.diminfo[0].strides = __pyx_pybuffernd_sync_time.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_sync_time.diminfo[0].shape = __pyx_pybuffernd_sync_time.rcbuffer-&gt;pybuffer.shape[0];
    }
  }
  __pyx_t_5 = 0;
  __pyx_v_sync_time = ((PyArrayObject *)__pyx_t_4);
  __pyx_t_4 = 0;
</pre><pre class='line' style='background-color: #FFFF30' onclick='toggleDiv("line69")'> 69:     cdef cnp.ndarray[cnp.uint64_t, ndim=1, mode='c'] hhtime = np.empty((length,), dtype='u8')</pre>
<pre id='line69' class='code' style='background-color: #FFFF30'>
  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":69
 *     cdef cnp.uint64_t _sync_time
 *     cdef cnp.ndarray[cnp.uint64_t, ndim=1, mode='c'] sync_time = np.empty((length,), dtype='u8')
 *     cdef cnp.ndarray[cnp.uint64_t, ndim=1, mode='c'] hhtime = np.empty((length,), dtype='u8')             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *     cdef cnp.ndarray[cnp.uint8_t, ndim=1, mode='c'] hhchannel = np.empty((length,), dtype='u1')
 *     cdef cnp.ndarray[cnp.uint8_t, ndim=1, mode='c'] hhspecial = np.empty((length,), dtype='u1')
 */
  __pyx_t_4 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s__np);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 69; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
  __pyx_t_3 = __Pyx_<span class='py_c_api'>PyObject_GetAttrStr</span>(__pyx_t_4, __pyx_n_s__empty);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 69; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  __pyx_t_4 = __Pyx_PyInt_to_py_npy_uint64(__pyx_v_length);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 69; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
  __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 69; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, __pyx_t_4);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_4);
  __pyx_t_4 = 0;
  __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 69; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, ((PyObject *)__pyx_t_1));
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_t_1));
  __pyx_t_1 = 0;
  __pyx_t_1 = <span class='py_c_api'>PyDict_New</span>();<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 69; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((PyObject *)__pyx_t_1));
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_1, ((PyObject *)__pyx_n_s__dtype), ((PyObject *)__pyx_n_s__u8)) &lt; 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 69; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_t_2 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_3, ((PyObject *)__pyx_t_4), ((PyObject *)__pyx_t_1));<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 69; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_t_4)); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_t_1)); __pyx_t_1 = 0;
  if (!(likely(((__pyx_t_2) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_2, __pyx_ptype_5numpy_ndarray)))))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 69; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_t_6 = ((PyArrayObject *)__pyx_t_2);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_hhtime.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_6, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_uint64_t, PyBUF_FORMAT| PyBUF_C_CONTIGUOUS| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
      __pyx_v_hhtime = ((PyArrayObject *)Py_None); <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None); __pyx_pybuffernd_hhtime.rcbuffer-&gt;pybuffer.buf = NULL;
     <span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 69; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    } else {__pyx_pybuffernd_hhtime.diminfo[0].strides = __pyx_pybuffernd_hhtime.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_hhtime.diminfo[0].shape = __pyx_pybuffernd_hhtime.rcbuffer-&gt;pybuffer.shape[0];
    }
  }
  __pyx_t_6 = 0;
  __pyx_v_hhtime = ((PyArrayObject *)__pyx_t_2);
  __pyx_t_2 = 0;
</pre><pre class='line' style='background-color: #FFFF30' onclick='toggleDiv("line70")'> 70:     cdef cnp.ndarray[cnp.uint8_t, ndim=1, mode='c'] hhchannel = np.empty((length,), dtype='u1')</pre>
<pre id='line70' class='code' style='background-color: #FFFF30'>
  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":70
 *     cdef cnp.ndarray[cnp.uint64_t, ndim=1, mode='c'] sync_time = np.empty((length,), dtype='u8')
 *     cdef cnp.ndarray[cnp.uint64_t, ndim=1, mode='c'] hhtime = np.empty((length,), dtype='u8')
 *     cdef cnp.ndarray[cnp.uint8_t, ndim=1, mode='c'] hhchannel = np.empty((length,), dtype='u1')             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *     cdef cnp.ndarray[cnp.uint8_t, ndim=1, mode='c'] hhspecial = np.empty((length,), dtype='u1')
 *     cdef cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] sync_number = np.empty((length,), dtype='u4')
 */
  __pyx_t_2 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s__np);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 70; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  __pyx_t_1 = __Pyx_<span class='py_c_api'>PyObject_GetAttrStr</span>(__pyx_t_2, __pyx_n_s__empty);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 70; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  __pyx_t_2 = __Pyx_PyInt_to_py_npy_uint64(__pyx_v_length);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 70; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  __pyx_t_4 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 70; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_4, 0, __pyx_t_2);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_2);
  __pyx_t_2 = 0;
  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 70; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, ((PyObject *)__pyx_t_4));
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_t_4));
  __pyx_t_4 = 0;
  __pyx_t_4 = <span class='py_c_api'>PyDict_New</span>();<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 70; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((PyObject *)__pyx_t_4));
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_4, ((PyObject *)__pyx_n_s__dtype), ((PyObject *)__pyx_n_s__u1)) &lt; 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 70; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_t_3 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_1, ((PyObject *)__pyx_t_2), ((PyObject *)__pyx_t_4));<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 70; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_t_2)); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_t_4)); __pyx_t_4 = 0;
  if (!(likely(((__pyx_t_3) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_3, __pyx_ptype_5numpy_ndarray)))))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 70; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_t_7 = ((PyArrayObject *)__pyx_t_3);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_hhchannel.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_7, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_uint8_t, PyBUF_FORMAT| PyBUF_C_CONTIGUOUS| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
      __pyx_v_hhchannel = ((PyArrayObject *)Py_None); <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None); __pyx_pybuffernd_hhchannel.rcbuffer-&gt;pybuffer.buf = NULL;
     <span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 70; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    } else {__pyx_pybuffernd_hhchannel.diminfo[0].strides = __pyx_pybuffernd_hhchannel.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_hhchannel.diminfo[0].shape = __pyx_pybuffernd_hhchannel.rcbuffer-&gt;pybuffer.shape[0];
    }
  }
  __pyx_t_7 = 0;
  __pyx_v_hhchannel = ((PyArrayObject *)__pyx_t_3);
  __pyx_t_3 = 0;
</pre><pre class='line' style='background-color: #FFFF30' onclick='toggleDiv("line71")'> 71:     cdef cnp.ndarray[cnp.uint8_t, ndim=1, mode='c'] hhspecial = np.empty((length,), dtype='u1')</pre>
<pre id='line71' class='code' style='background-color: #FFFF30'>
  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":71
 *     cdef cnp.ndarray[cnp.uint64_t, ndim=1, mode='c'] hhtime = np.empty((length,), dtype='u8')
 *     cdef cnp.ndarray[cnp.uint8_t, ndim=1, mode='c'] hhchannel = np.empty((length,), dtype='u1')
 *     cdef cnp.ndarray[cnp.uint8_t, ndim=1, mode='c'] hhspecial = np.empty((length,), dtype='u1')             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *     cdef cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] sync_number = np.empty((length,), dtype='u4')
 * 
 */
  __pyx_t_3 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s__np);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 71; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
  __pyx_t_4 = __Pyx_<span class='py_c_api'>PyObject_GetAttrStr</span>(__pyx_t_3, __pyx_n_s__empty);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 71; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_3); __pyx_t_3 = 0;
  __pyx_t_3 = __Pyx_PyInt_to_py_npy_uint64(__pyx_v_length);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 71; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
  __pyx_t_2 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 71; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_2, 0, __pyx_t_3);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_3);
  __pyx_t_3 = 0;
  __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 71; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, ((PyObject *)__pyx_t_2));
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_t_2));
  __pyx_t_2 = 0;
  __pyx_t_2 = <span class='py_c_api'>PyDict_New</span>();<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 71; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((PyObject *)__pyx_t_2));
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_2, ((PyObject *)__pyx_n_s__dtype), ((PyObject *)__pyx_n_s__u1)) &lt; 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 71; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_t_1 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_4, ((PyObject *)__pyx_t_3), ((PyObject *)__pyx_t_2));<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 71; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_4); __pyx_t_4 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_t_3)); __pyx_t_3 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_t_2)); __pyx_t_2 = 0;
  if (!(likely(((__pyx_t_1) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_1, __pyx_ptype_5numpy_ndarray)))))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 71; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_t_8 = ((PyArrayObject *)__pyx_t_1);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_hhspecial.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_8, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_uint8_t, PyBUF_FORMAT| PyBUF_C_CONTIGUOUS| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
      __pyx_v_hhspecial = ((PyArrayObject *)Py_None); <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None); __pyx_pybuffernd_hhspecial.rcbuffer-&gt;pybuffer.buf = NULL;
     <span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 71; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    } else {__pyx_pybuffernd_hhspecial.diminfo[0].strides = __pyx_pybuffernd_hhspecial.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_hhspecial.diminfo[0].shape = __pyx_pybuffernd_hhspecial.rcbuffer-&gt;pybuffer.shape[0];
    }
  }
  __pyx_t_8 = 0;
  __pyx_v_hhspecial = ((PyArrayObject *)__pyx_t_1);
  __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFF30' onclick='toggleDiv("line72")'> 72:     cdef cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] sync_number = np.empty((length,), dtype='u4')</pre>
<pre id='line72' class='code' style='background-color: #FFFF30'>
  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":72
 *     cdef cnp.ndarray[cnp.uint8_t, ndim=1, mode='c'] hhchannel = np.empty((length,), dtype='u1')
 *     cdef cnp.ndarray[cnp.uint8_t, ndim=1, mode='c'] hhspecial = np.empty((length,), dtype='u1')
 *     cdef cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] sync_number = np.empty((length,), dtype='u4')             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 * 
 *     for k in range(length):
 */
  __pyx_t_1 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s__np);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 72; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  __pyx_t_2 = __Pyx_<span class='py_c_api'>PyObject_GetAttrStr</span>(__pyx_t_1, __pyx_n_s__empty);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 72; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_t_1 = __Pyx_PyInt_to_py_npy_uint64(__pyx_v_length);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 72; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  __pyx_t_3 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 72; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_3, 0, __pyx_t_1);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_1);
  __pyx_t_1 = 0;
  __pyx_t_1 = <span class='py_c_api'>PyTuple_New</span>(1);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 72; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_1, 0, ((PyObject *)__pyx_t_3));
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_t_3));
  __pyx_t_3 = 0;
  __pyx_t_3 = <span class='py_c_api'>PyDict_New</span>();<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 72; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(((PyObject *)__pyx_t_3));
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_t_3, ((PyObject *)__pyx_n_s__dtype), ((PyObject *)__pyx_n_s__u4)) &lt; 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 72; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_t_4 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_2, ((PyObject *)__pyx_t_1), ((PyObject *)__pyx_t_3));<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 72; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_2); __pyx_t_2 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_t_1)); __pyx_t_1 = 0;
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_t_3)); __pyx_t_3 = 0;
  if (!(likely(((__pyx_t_4) == Py_None) || likely(<span class='pyx_c_api'>__Pyx_TypeTest</span>(__pyx_t_4, __pyx_ptype_5numpy_ndarray)))))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 72; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_t_9 = ((PyArrayObject *)__pyx_t_4);
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_sync_number.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_t_9, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_uint32_t, PyBUF_FORMAT| PyBUF_C_CONTIGUOUS| PyBUF_WRITABLE, 1, 0, __pyx_stack) == -1)) {
      __pyx_v_sync_number = ((PyArrayObject *)Py_None); <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None); __pyx_pybuffernd_sync_number.rcbuffer-&gt;pybuffer.buf = NULL;
     <span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 72; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    } else {__pyx_pybuffernd_sync_number.diminfo[0].strides = __pyx_pybuffernd_sync_number.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_sync_number.diminfo[0].shape = __pyx_pybuffernd_sync_number.rcbuffer-&gt;pybuffer.shape[0];
    }
  }
  __pyx_t_9 = 0;
  __pyx_v_sync_number = ((PyArrayObject *)__pyx_t_4);
  __pyx_t_4 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line73")'> 73: </pre>
<pre id='line73' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line74")'> 74:     for k in range(length):</pre>
<pre id='line74' class='code' style='background-color: #FFFFff'>
  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":74
 *     cdef cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] sync_number = np.empty((length,), dtype='u4')
 * 
 *     for k in range(length):             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 * 
 *         if special[k] == 1:
 */
  __pyx_t_10 = __pyx_v_length;
  for (__pyx_t_11 = 0; __pyx_t_11 &lt; __pyx_t_10; __pyx_t_11+=1) {
    __pyx_v_k = __pyx_t_11;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line75")'> 75: </pre>
<pre id='line75' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line76")'> 76:         if special[k] == 1:</pre>
<pre id='line76' class='code' style='background-color: #FFFFff'>
    /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":76
 *     for k in range(length):
 * 
 *         if special[k] == 1:             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             if channel[k] == 63:
 *                 t_ofl += wraparound
 */
    __pyx_t_12 = __pyx_v_k;
    __pyx_t_13 = (((*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_special.rcbuffer-&gt;pybuffer.buf, __pyx_t_12, __pyx_pybuffernd_special.diminfo[0].strides)) == 1) != 0);
    if (__pyx_t_13) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line77")'> 77:             if channel[k] == 63:</pre>
<pre id='line77' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":77
 * 
 *         if special[k] == 1:
 *             if channel[k] == 63:             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *                 t_ofl += wraparound
 *                 continue
 */
      __pyx_t_14 = __pyx_v_k;
      __pyx_t_13 = (((*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer.buf, __pyx_t_14, __pyx_pybuffernd_channel.diminfo[0].strides)) == 63) != 0);
      if (__pyx_t_13) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line78")'> 78:                 t_ofl += wraparound</pre>
<pre id='line78' class='code' style='background-color: #FFFFff'>
        /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":78
 *         if special[k] == 1:
 *             if channel[k] == 63:
 *                 t_ofl += wraparound             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *                 continue
 *             elif channel[k] == 0: # This is a SYNC event
 */
        __pyx_v_t_ofl = (__pyx_v_t_ofl + __pyx_v_wraparound);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line79")'> 79:                 continue</pre>
<pre id='line79' class='code' style='background-color: #FFFFff'>
        /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":79
 *             if channel[k] == 63:
 *                 t_ofl += wraparound
 *                 continue             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             elif channel[k] == 0: # This is a SYNC event
 *                 t_lastsync = (time[k] + t_ofl) / t2_time_factor      #the t2_time_factor comes from an extra bit for the HH. see HH docs.
 */
        goto __pyx_L3_continue;
        goto __pyx_L6;
      }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line80")'> 80:             elif channel[k] == 0: # This is a SYNC event</pre>
<pre id='line80' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":80
 *                 t_ofl += wraparound
 *                 continue
 *             elif channel[k] == 0: # This is a SYNC event             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *                 t_lastsync = (time[k] + t_ofl) / t2_time_factor      #the t2_time_factor comes from an extra bit for the HH. see HH docs.
 *                 last_sync_number += 1
 */
      __pyx_t_15 = __pyx_v_k;
      __pyx_t_13 = (((*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer.buf, __pyx_t_15, __pyx_pybuffernd_channel.diminfo[0].strides)) == 0) != 0);
      if (__pyx_t_13) {
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line81")'> 81:                 t_lastsync = (time[k] + t_ofl) / t2_time_factor      #the t2_time_factor comes from an extra bit for the HH. see HH docs.</pre>
<pre id='line81' class='code' style='background-color: #FFFFaa'>
        /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":81
 *                 continue
 *             elif channel[k] == 0: # This is a SYNC event
 *                 t_lastsync = (time[k] + t_ofl) / t2_time_factor      #the t2_time_factor comes from an extra bit for the HH. see HH docs.             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *                 last_sync_number += 1
 *                 continue
 */
        __pyx_t_16 = __pyx_v_k;
        __pyx_t_17 = ((*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_time.rcbuffer-&gt;pybuffer.buf, __pyx_t_16, __pyx_pybuffernd_time.diminfo[0].strides)) + __pyx_v_t_ofl);
        if (unlikely(__pyx_v_t2_time_factor == 0)) {
          #ifdef WITH_THREAD
          PyGILState_STATE __pyx_gilstate_save = PyGILState_Ensure();
          #endif
          <span class='py_c_api'>PyErr_Format</span>(PyExc_ZeroDivisionError, "integer division or modulo by zero");
          #ifdef WITH_THREAD
          PyGILState_Release(__pyx_gilstate_save);
          #endif
         <span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 81; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
        }
        __pyx_v_t_lastsync = (__pyx_t_17 / __pyx_v_t2_time_factor);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line82")'> 82:                 last_sync_number += 1</pre>
<pre id='line82' class='code' style='background-color: #FFFFff'>
        /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":82
 *             elif channel[k] == 0: # This is a SYNC event
 *                 t_lastsync = (time[k] + t_ofl) / t2_time_factor      #the t2_time_factor comes from an extra bit for the HH. see HH docs.
 *                 last_sync_number += 1             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *                 continue
 * 
 */
        __pyx_v_last_sync_number = (__pyx_v_last_sync_number + 1);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line83")'> 83:                 continue</pre>
<pre id='line83' class='code' style='background-color: #FFFFff'>
        /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":83
 *                 t_lastsync = (time[k] + t_ofl) / t2_time_factor      #the t2_time_factor comes from an extra bit for the HH. see HH docs.
 *                 last_sync_number += 1
 *                 continue             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 * 
 *             elif channel[k] &amp; count_marker_channel:  # This is an entanglement event
 */
        goto __pyx_L3_continue;
        goto __pyx_L6;
      }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line84")'> 84: </pre>
<pre id='line84' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line85")'> 85:             elif channel[k] &amp; count_marker_channel:  # This is an entanglement event</pre>
<pre id='line85' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":85
 *                 continue
 * 
 *             elif channel[k] &amp; count_marker_channel:  # This is an entanglement event             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *                 marker_count_number += 1
 * 
 */
      __pyx_t_17 = __pyx_v_k;
      __pyx_t_13 = (((*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer.buf, __pyx_t_17, __pyx_pybuffernd_channel.diminfo[0].strides)) &amp; __pyx_v_count_marker_channel) != 0);
      if (__pyx_t_13) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line86")'> 86:                 marker_count_number += 1</pre>
<pre id='line86' class='code' style='background-color: #FFFFff'>
        /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":86
 * 
 *             elif channel[k] &amp; count_marker_channel:  # This is an entanglement event
 *                 marker_count_number += 1             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 * 
 *             _sync_time = (t_ofl + time[k]) / t2_time_factor  - t_lastsync
 */
        __pyx_v_marker_count_number = (__pyx_v_marker_count_number + 1);
        goto __pyx_L6;
      }
      __pyx_L6:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line87")'> 87: </pre>
<pre id='line87' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line88")'> 88:             _sync_time = (t_ofl + time[k]) / t2_time_factor  - t_lastsync</pre>
<pre id='line88' class='code' style='background-color: #FFFFaa'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":88
 *                 marker_count_number += 1
 * 
 *             _sync_time = (t_ofl + time[k]) / t2_time_factor  - t_lastsync             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             hhtime[l] = (t_ofl + time[k]) / t2_time_factor
 *             hhchannel[l] = channel[k]
 */
      __pyx_t_18 = __pyx_v_k;
      __pyx_t_19 = (__pyx_v_t_ofl + (*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_time.rcbuffer-&gt;pybuffer.buf, __pyx_t_18, __pyx_pybuffernd_time.diminfo[0].strides)));
      if (unlikely(__pyx_v_t2_time_factor == 0)) {
        #ifdef WITH_THREAD
        PyGILState_STATE __pyx_gilstate_save = PyGILState_Ensure();
        #endif
        <span class='py_c_api'>PyErr_Format</span>(PyExc_ZeroDivisionError, "integer division or modulo by zero");
        #ifdef WITH_THREAD
        PyGILState_Release(__pyx_gilstate_save);
        #endif
       <span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 88; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      }
      __pyx_v__sync_time = ((__pyx_t_19 / __pyx_v_t2_time_factor) - __pyx_v_t_lastsync);
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line89")'> 89:             hhtime[l] = (t_ofl + time[k]) / t2_time_factor</pre>
<pre id='line89' class='code' style='background-color: #FFFFaa'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":89
 * 
 *             _sync_time = (t_ofl + time[k]) / t2_time_factor  - t_lastsync
 *             hhtime[l] = (t_ofl + time[k]) / t2_time_factor             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             hhchannel[l] = channel[k]
 *             hhspecial[l] = special[k]
 */
      __pyx_t_19 = __pyx_v_k;
      __pyx_t_20 = (__pyx_v_t_ofl + (*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_time.rcbuffer-&gt;pybuffer.buf, __pyx_t_19, __pyx_pybuffernd_time.diminfo[0].strides)));
      if (unlikely(__pyx_v_t2_time_factor == 0)) {
        #ifdef WITH_THREAD
        PyGILState_STATE __pyx_gilstate_save = PyGILState_Ensure();
        #endif
        <span class='py_c_api'>PyErr_Format</span>(PyExc_ZeroDivisionError, "integer division or modulo by zero");
        #ifdef WITH_THREAD
        PyGILState_Release(__pyx_gilstate_save);
        #endif
       <span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 89; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      }
      __pyx_t_21 = __pyx_v_l;
      *__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint64_t *, __pyx_pybuffernd_hhtime.rcbuffer-&gt;pybuffer.buf, __pyx_t_21, __pyx_pybuffernd_hhtime.diminfo[0].strides) = (__pyx_t_20 / __pyx_v_t2_time_factor);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line90")'> 90:             hhchannel[l] = channel[k]</pre>
<pre id='line90' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":90
 *             _sync_time = (t_ofl + time[k]) / t2_time_factor  - t_lastsync
 *             hhtime[l] = (t_ofl + time[k]) / t2_time_factor
 *             hhchannel[l] = channel[k]             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             hhspecial[l] = special[k]
 *             sync_time[l] = _sync_time
 */
      __pyx_t_20 = __pyx_v_k;
      __pyx_t_22 = __pyx_v_l;
      *__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint8_t *, __pyx_pybuffernd_hhchannel.rcbuffer-&gt;pybuffer.buf, __pyx_t_22, __pyx_pybuffernd_hhchannel.diminfo[0].strides) = (*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer.buf, __pyx_t_20, __pyx_pybuffernd_channel.diminfo[0].strides));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line91")'> 91:             hhspecial[l] = special[k]</pre>
<pre id='line91' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":91
 *             hhtime[l] = (t_ofl + time[k]) / t2_time_factor
 *             hhchannel[l] = channel[k]
 *             hhspecial[l] = special[k]             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             sync_time[l] = _sync_time
 *             sync_number[l] = last_sync_number
 */
      __pyx_t_23 = __pyx_v_k;
      __pyx_t_24 = __pyx_v_l;
      *__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint8_t *, __pyx_pybuffernd_hhspecial.rcbuffer-&gt;pybuffer.buf, __pyx_t_24, __pyx_pybuffernd_hhspecial.diminfo[0].strides) = (*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_special.rcbuffer-&gt;pybuffer.buf, __pyx_t_23, __pyx_pybuffernd_special.diminfo[0].strides));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line92")'> 92:             sync_time[l] = _sync_time</pre>
<pre id='line92' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":92
 *             hhchannel[l] = channel[k]
 *             hhspecial[l] = special[k]
 *             sync_time[l] = _sync_time             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             sync_number[l] = last_sync_number
 *             l += 1
 */
      __pyx_t_25 = __pyx_v_l;
      *__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint64_t *, __pyx_pybuffernd_sync_time.rcbuffer-&gt;pybuffer.buf, __pyx_t_25, __pyx_pybuffernd_sync_time.diminfo[0].strides) = __pyx_v__sync_time;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line93")'> 93:             sync_number[l] = last_sync_number</pre>
<pre id='line93' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":93
 *             hhspecial[l] = special[k]
 *             sync_time[l] = _sync_time
 *             sync_number[l] = last_sync_number             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             l += 1
 *             continue
 */
      __pyx_t_26 = __pyx_v_l;
      *__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_sync_number.rcbuffer-&gt;pybuffer.buf, __pyx_t_26, __pyx_pybuffernd_sync_number.diminfo[0].strides) = __pyx_v_last_sync_number;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line94")'> 94:             l += 1</pre>
<pre id='line94' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":94
 *             sync_time[l] = _sync_time
 *             sync_number[l] = last_sync_number
 *             l += 1             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             continue
 * 
 */
      __pyx_v_l = (__pyx_v_l + 1);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line95")'> 95:             continue</pre>
<pre id='line95' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":95
 *             sync_number[l] = last_sync_number
 *             l += 1
 *             continue             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 * 
 *         _sync_time = (t_ofl + time[k]) / t2_time_factor  - t_lastsync
 */
      goto __pyx_L3_continue;
      goto __pyx_L5;
    }
    __pyx_L5:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line96")'> 96: </pre>
<pre id='line96' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line97")'> 97:         _sync_time = (t_ofl + time[k]) / t2_time_factor  - t_lastsync</pre>
<pre id='line97' class='code' style='background-color: #FFFFaa'>
    /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":97
 *             continue
 * 
 *         _sync_time = (t_ofl + time[k]) / t2_time_factor  - t_lastsync             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 * 
 *         # now calculate the histogram (only photons, no markers)
 */
    __pyx_t_27 = __pyx_v_k;
    __pyx_t_28 = (__pyx_v_t_ofl + (*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_time.rcbuffer-&gt;pybuffer.buf, __pyx_t_27, __pyx_pybuffernd_time.diminfo[0].strides)));
    if (unlikely(__pyx_v_t2_time_factor == 0)) {
      #ifdef WITH_THREAD
      PyGILState_STATE __pyx_gilstate_save = PyGILState_Ensure();
      #endif
      <span class='py_c_api'>PyErr_Format</span>(PyExc_ZeroDivisionError, "integer division or modulo by zero");
      #ifdef WITH_THREAD
      PyGILState_Release(__pyx_gilstate_save);
      #endif
     <span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 97; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    }
    __pyx_v__sync_time = ((__pyx_t_28 / __pyx_v_t2_time_factor) - __pyx_v_t_lastsync);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line98")'> 98: </pre>
<pre id='line98' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line99")'> 99:         # now calculate the histogram (only photons, no markers)</pre>
<pre id='line99' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line100")'> 100:         if _sync_time &gt; min_hist_sync_time and _sync_time &lt; max_hist_sync_time:</pre>
<pre id='line100' class='code' style='background-color: #FFFFff'>
    /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":100
 * 
 *         # now calculate the histogram (only photons, no markers)
 *         if _sync_time &gt; min_hist_sync_time and _sync_time &lt; max_hist_sync_time:             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             hist[_sync_time - min_hist_sync_time,channel[k]] += 1
 * 
 */
    __pyx_t_13 = ((__pyx_v__sync_time &gt; __pyx_v_min_hist_sync_time) != 0);
    if (__pyx_t_13) {
      __pyx_t_29 = ((__pyx_v__sync_time &lt; __pyx_v_max_hist_sync_time) != 0);
      __pyx_t_30 = __pyx_t_29;
    } else {
      __pyx_t_30 = __pyx_t_13;
    }
    if (__pyx_t_30) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line101")'> 101:             hist[_sync_time - min_hist_sync_time,channel[k]] += 1</pre>
<pre id='line101' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":101
 *         # now calculate the histogram (only photons, no markers)
 *         if _sync_time &gt; min_hist_sync_time and _sync_time &lt; max_hist_sync_time:
 *             hist[_sync_time - min_hist_sync_time,channel[k]] += 1             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 * 
 *         if _sync_time &gt; min_sync_time and _sync_time &lt; max_sync_time:  # write all photons in ROI
 */
      __pyx_t_28 = __pyx_v_k;
      __pyx_t_31 = (__pyx_v__sync_time - __pyx_v_min_hist_sync_time);
      __pyx_t_32 = (*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer.buf, __pyx_t_28, __pyx_pybuffernd_channel.diminfo[0].strides));
      *__Pyx_BufPtrCContig2d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_hist.rcbuffer-&gt;pybuffer.buf, __pyx_t_31, __pyx_pybuffernd_hist.diminfo[0].strides, __pyx_t_32, __pyx_pybuffernd_hist.diminfo[1].strides) += 1;
      goto __pyx_L7;
    }
    __pyx_L7:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line102")'> 102: </pre>
<pre id='line102' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line103")'> 103:         if _sync_time &gt; min_sync_time and _sync_time &lt; max_sync_time:  # write all photons in ROI</pre>
<pre id='line103' class='code' style='background-color: #FFFFff'>
    /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":103
 *             hist[_sync_time - min_hist_sync_time,channel[k]] += 1
 * 
 *         if _sync_time &gt; min_sync_time and _sync_time &lt; max_sync_time:  # write all photons in ROI             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             hhtime[l] = (t_ofl + time[k]) / t2_time_factor
 *             hhchannel[l] = channel[k]
 */
    __pyx_t_30 = ((__pyx_v__sync_time &gt; __pyx_v_min_sync_time) != 0);
    if (__pyx_t_30) {
      __pyx_t_13 = ((__pyx_v__sync_time &lt; __pyx_v_max_sync_time) != 0);
      __pyx_t_29 = __pyx_t_13;
    } else {
      __pyx_t_29 = __pyx_t_30;
    }
    if (__pyx_t_29) {
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line104")'> 104:             hhtime[l] = (t_ofl + time[k]) / t2_time_factor</pre>
<pre id='line104' class='code' style='background-color: #FFFFaa'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":104
 * 
 *         if _sync_time &gt; min_sync_time and _sync_time &lt; max_sync_time:  # write all photons in ROI
 *             hhtime[l] = (t_ofl + time[k]) / t2_time_factor             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             hhchannel[l] = channel[k]
 *             hhspecial[l] = special[k]
 */
      __pyx_t_33 = __pyx_v_k;
      __pyx_t_34 = (__pyx_v_t_ofl + (*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_time.rcbuffer-&gt;pybuffer.buf, __pyx_t_33, __pyx_pybuffernd_time.diminfo[0].strides)));
      if (unlikely(__pyx_v_t2_time_factor == 0)) {
        #ifdef WITH_THREAD
        PyGILState_STATE __pyx_gilstate_save = PyGILState_Ensure();
        #endif
        <span class='py_c_api'>PyErr_Format</span>(PyExc_ZeroDivisionError, "integer division or modulo by zero");
        #ifdef WITH_THREAD
        PyGILState_Release(__pyx_gilstate_save);
        #endif
       <span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 104; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
      }
      __pyx_t_35 = __pyx_v_l;
      *__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint64_t *, __pyx_pybuffernd_hhtime.rcbuffer-&gt;pybuffer.buf, __pyx_t_35, __pyx_pybuffernd_hhtime.diminfo[0].strides) = (__pyx_t_34 / __pyx_v_t2_time_factor);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line105")'> 105:             hhchannel[l] = channel[k]</pre>
<pre id='line105' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":105
 *         if _sync_time &gt; min_sync_time and _sync_time &lt; max_sync_time:  # write all photons in ROI
 *             hhtime[l] = (t_ofl + time[k]) / t2_time_factor
 *             hhchannel[l] = channel[k]             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             hhspecial[l] = special[k]
 *             sync_time[l] = _sync_time
 */
      __pyx_t_34 = __pyx_v_k;
      __pyx_t_36 = __pyx_v_l;
      *__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint8_t *, __pyx_pybuffernd_hhchannel.rcbuffer-&gt;pybuffer.buf, __pyx_t_36, __pyx_pybuffernd_hhchannel.diminfo[0].strides) = (*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer.buf, __pyx_t_34, __pyx_pybuffernd_channel.diminfo[0].strides));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line106")'> 106:             hhspecial[l] = special[k]</pre>
<pre id='line106' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":106
 *             hhtime[l] = (t_ofl + time[k]) / t2_time_factor
 *             hhchannel[l] = channel[k]
 *             hhspecial[l] = special[k]             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             sync_time[l] = _sync_time
 *             sync_number[l] = last_sync_number
 */
      __pyx_t_37 = __pyx_v_k;
      __pyx_t_38 = __pyx_v_l;
      *__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint8_t *, __pyx_pybuffernd_hhspecial.rcbuffer-&gt;pybuffer.buf, __pyx_t_38, __pyx_pybuffernd_hhspecial.diminfo[0].strides) = (*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_special.rcbuffer-&gt;pybuffer.buf, __pyx_t_37, __pyx_pybuffernd_special.diminfo[0].strides));
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line107")'> 107:             sync_time[l] = _sync_time</pre>
<pre id='line107' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":107
 *             hhchannel[l] = channel[k]
 *             hhspecial[l] = special[k]
 *             sync_time[l] = _sync_time             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             sync_number[l] = last_sync_number
 *             l += 1
 */
      __pyx_t_39 = __pyx_v_l;
      *__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint64_t *, __pyx_pybuffernd_sync_time.rcbuffer-&gt;pybuffer.buf, __pyx_t_39, __pyx_pybuffernd_sync_time.diminfo[0].strides) = __pyx_v__sync_time;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line108")'> 108:             sync_number[l] = last_sync_number</pre>
<pre id='line108' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":108
 *             hhspecial[l] = special[k]
 *             sync_time[l] = _sync_time
 *             sync_number[l] = last_sync_number             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             l += 1
 *             continue
 */
      __pyx_t_40 = __pyx_v_l;
      *__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_sync_number.rcbuffer-&gt;pybuffer.buf, __pyx_t_40, __pyx_pybuffernd_sync_number.diminfo[0].strides) = __pyx_v_last_sync_number;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line109")'> 109:             l += 1</pre>
<pre id='line109' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":109
 *             sync_time[l] = _sync_time
 *             sync_number[l] = last_sync_number
 *             l += 1             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             continue
 * 
 */
      __pyx_v_l = (__pyx_v_l + 1);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line110")'> 110:             continue</pre>
<pre id='line110' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":110
 *             sync_number[l] = last_sync_number
 *             l += 1
 *             continue             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 * 
 *     return hhtime[:l], hhchannel[:l], hhspecial[:l], sync_time[:l], hist, sync_number[:l], l, t_ofl, t_lastsync, last_sync_number, marker_count_number
 */
      goto __pyx_L3_continue;
      goto __pyx_L8;
    }
    __pyx_L8:;
    __pyx_L3_continue:;
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line111")'> 111: </pre>
<pre id='line111' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF08' onclick='toggleDiv("line112")'> 112:     return hhtime[:l], hhchannel[:l], hhspecial[:l], sync_time[:l], hist, sync_number[:l], l, t_ofl, t_lastsync, last_sync_number, marker_count_number</pre>
<pre id='line112' class='code' style='background-color: #FFFF08'>
  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":112
 *             continue
 * 
 *     return hhtime[:l], hhchannel[:l], hhspecial[:l], sync_time[:l], hist, sync_number[:l], l, t_ofl, t_lastsync, last_sync_number, marker_count_number             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 * 
 * 
 */
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_4 = __Pyx_<span class='py_c_api'>PyObject_GetSlice</span>(((PyObject *)__pyx_v_hhtime), 0, __pyx_v_l, NULL, NULL, NULL, 0, 1, 0);<span class='error_goto'> if (unlikely(!__pyx_t_4)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 112; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_4);
  __pyx_t_3 = __Pyx_<span class='py_c_api'>PyObject_GetSlice</span>(((PyObject *)__pyx_v_hhchannel), 0, __pyx_v_l, NULL, NULL, NULL, 0, 1, 0);<span class='error_goto'> if (unlikely(!__pyx_t_3)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 112; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_3);
  __pyx_t_1 = __Pyx_<span class='py_c_api'>PyObject_GetSlice</span>(((PyObject *)__pyx_v_hhspecial), 0, __pyx_v_l, NULL, NULL, NULL, 0, 1, 0);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 112; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  __pyx_t_2 = __Pyx_<span class='py_c_api'>PyObject_GetSlice</span>(((PyObject *)__pyx_v_sync_time), 0, __pyx_v_l, NULL, NULL, NULL, 0, 1, 0);<span class='error_goto'> if (unlikely(!__pyx_t_2)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 112; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_2);
  __pyx_t_41 = __Pyx_<span class='py_c_api'>PyObject_GetSlice</span>(((PyObject *)__pyx_v_sync_number), 0, __pyx_v_l, NULL, NULL, NULL, 0, 1, 0);<span class='error_goto'> if (unlikely(!__pyx_t_41)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 112; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_41);
  __pyx_t_42 = __Pyx_PyInt_to_py_npy_uint64(__pyx_v_l);<span class='error_goto'> if (unlikely(!__pyx_t_42)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 112; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_42);
  __pyx_t_43 = __Pyx_PyInt_to_py_npy_uint64(__pyx_v_t_ofl);<span class='error_goto'> if (unlikely(!__pyx_t_43)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 112; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_43);
  __pyx_t_44 = __Pyx_PyInt_to_py_npy_uint64(__pyx_v_t_lastsync);<span class='error_goto'> if (unlikely(!__pyx_t_44)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 112; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_44);
  __pyx_t_45 = __Pyx_PyInt_to_py_npy_uint32(__pyx_v_last_sync_number);<span class='error_goto'> if (unlikely(!__pyx_t_45)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 112; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_45);
  __pyx_t_46 = __Pyx_PyInt_to_py_npy_uint64(__pyx_v_marker_count_number);<span class='error_goto'> if (unlikely(!__pyx_t_46)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 112; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_46);
  __pyx_t_47 = <span class='py_c_api'>PyTuple_New</span>(11);<span class='error_goto'> if (unlikely(!__pyx_t_47)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 112; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_47);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_47, 0, __pyx_t_4);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_4);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_47, 1, __pyx_t_3);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_3);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_47, 2, __pyx_t_1);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_1);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_47, 3, __pyx_t_2);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_hist));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_47, 4, ((PyObject *)__pyx_v_hist));
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_v_hist));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_47, 5, __pyx_t_41);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_41);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_47, 6, __pyx_t_42);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_42);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_47, 7, __pyx_t_43);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_43);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_47, 8, __pyx_t_44);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_44);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_47, 9, __pyx_t_45);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_45);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_47, 10, __pyx_t_46);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_46);
  __pyx_t_4 = 0;
  __pyx_t_3 = 0;
  __pyx_t_1 = 0;
  __pyx_t_2 = 0;
  __pyx_t_41 = 0;
  __pyx_t_42 = 0;
  __pyx_t_43 = 0;
  __pyx_t_44 = 0;
  __pyx_t_45 = 0;
  __pyx_t_46 = 0;
  __pyx_r = ((PyObject *)__pyx_t_47);
  __pyx_t_47 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_1);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_2);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_3);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_4);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_41);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_42);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_43);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_44);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_45);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_46);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_47);
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_hhchannel.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_hhspecial.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_hhtime.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_hist.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_special.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_sync_number.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_sync_time.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_time.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("measurement.lib.cython.PQ_T2_tools.T2_tools_src.T2_tools_v3.T2_live_filter", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_hhchannel.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_hhspecial.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_hhtime.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_hist.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_special.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_sync_number.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_sync_time.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_time.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_sync_time);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_hhtime);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_hhchannel);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_hhspecial);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>((PyObject *)__pyx_v_sync_number);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_11measurement_3lib_6cython_11PQ_T2_tools_12T2_tools_src_11T2_tools_v3_3T2_live_filter_integrated(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_11measurement_3lib_6cython_11PQ_T2_tools_12T2_tools_src_11T2_tools_v3_2T2_live_filter_integrated[] = "\n    This function expects as input decoded HH data:\n    - an array with time information,\n    - an array for the channel,\n    - an array containing the special bit,\n    and overflow information: \n    - the current overflow time,\n    - and the time of the last sync. (both start with zero and get updated by\n        calls of this function).\n    \n    Returns for each event (syncs and overflows are not in the data anymore)\n    - the absolute time since msmt start (in bins)\n    - channel\n    - special bit,\n    - relative time to the last previous sync (in bins)\n    and overflow information (absolute overflow time and time of the last sync).\n    ";
static PyMethodDef __pyx_mdef_11measurement_3lib_6cython_11PQ_T2_tools_12T2_tools_src_11T2_tools_v3_3T2_live_filter_integrated = {<span class='pyx_macro_api'>__Pyx_NAMESTR</span>("T2_live_filter_integrated"), (PyCFunction)__pyx_pw_11measurement_3lib_6cython_11PQ_T2_tools_12T2_tools_src_11T2_tools_v3_3T2_live_filter_integrated, METH_VARARGS|METH_KEYWORDS, <span class='pyx_macro_api'>__Pyx_DOCSTR</span>(__pyx_doc_11measurement_3lib_6cython_11PQ_T2_tools_12T2_tools_src_11T2_tools_v3_2T2_live_filter_integrated)};
static PyObject *__pyx_pw_11measurement_3lib_6cython_11PQ_T2_tools_12T2_tools_src_11T2_tools_v3_3T2_live_filter_integrated(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyArrayObject *__pyx_v_time = 0;
  PyArrayObject *__pyx_v_channel = 0;
  PyArrayObject *__pyx_v_special = 0;
  PyArrayObject *__pyx_v_hist0 = 0;
  PyArrayObject *__pyx_v_hist1 = 0;
  __pyx_t_5numpy_uint64_t __pyx_v_t_ofl;
  __pyx_t_5numpy_uint64_t __pyx_v_t_lastsync;
  __pyx_t_5numpy_uint64_t __pyx_v_last_sync_number;
  __pyx_t_5numpy_uint64_t __pyx_v_syncs_per_sweep;
  __pyx_t_5numpy_uint64_t __pyx_v_sweep_length;
  __pyx_t_5numpy_uint64_t __pyx_v_min_sync_time;
  __pyx_t_5numpy_uint64_t __pyx_v_max_sync_time;
  __pyx_t_5numpy_uint64_t __pyx_v_wraparound;
  __pyx_t_5numpy_uint64_t __pyx_v_t2_time_factor;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("T2_live_filter_integrated (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s__time,&amp;__pyx_n_s__channel,&amp;__pyx_n_s__special,&amp;__pyx_n_s__hist0,&amp;__pyx_n_s__hist1,&amp;__pyx_n_s__t_ofl,&amp;__pyx_n_s__t_lastsync,&amp;__pyx_n_s__last_sync_number,&amp;__pyx_n_s__syncs_per_sweep,&amp;__pyx_n_s__sweep_length,&amp;__pyx_n_s__min_sync_time,&amp;__pyx_n_s__max_sync_time,&amp;__pyx_n_s__wraparound,&amp;__pyx_n_s__t2_time_factor,0};
    PyObject* values[14] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case 14: values[13] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 13);
        case 13: values[12] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 12);
        case 12: values[11] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 11);
        case 11: values[10] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 10);
        case 10: values[9] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 9);
        case  9: values[8] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 8);
        case  8: values[7] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 7);
        case  7: values[6] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 6);
        case  6: values[5] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 5);
        case  5: values[4] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 4);
        case  4: values[3] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 3);
        case  3: values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__time)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        case  1:
        if (likely((values[1] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__channel)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated", 1, 14, 14, 1);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  2:
        if (likely((values[2] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__special)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated", 1, 14, 14, 2);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  3:
        if (likely((values[3] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__hist0)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated", 1, 14, 14, 3);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  4:
        if (likely((values[4] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__hist1)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated", 1, 14, 14, 4);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  5:
        if (likely((values[5] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__t_ofl)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated", 1, 14, 14, 5);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  6:
        if (likely((values[6] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__t_lastsync)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated", 1, 14, 14, 6);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  7:
        if (likely((values[7] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__last_sync_number)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated", 1, 14, 14, 7);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  8:
        if (likely((values[8] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__syncs_per_sweep)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated", 1, 14, 14, 8);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  9:
        if (likely((values[9] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__sweep_length)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated", 1, 14, 14, 9);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case 10:
        if (likely((values[10] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__min_sync_time)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated", 1, 14, 14, 10);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case 11:
        if (likely((values[11] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__max_sync_time)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated", 1, 14, 14, 11);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case 12:
        if (likely((values[12] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__wraparound)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated", 1, 14, 14, 12);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case 13:
        if (likely((values[13] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__t2_time_factor)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated", 1, 14, 14, 13);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "T2_live_filter_integrated") &lt; 0))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 14) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
      values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
      values[3] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 3);
      values[4] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 4);
      values[5] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 5);
      values[6] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 6);
      values[7] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 7);
      values[8] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 8);
      values[9] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 9);
      values[10] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 10);
      values[11] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 11);
      values[12] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 12);
      values[13] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 13);
    }
    __pyx_v_time = ((PyArrayObject *)values[0]);
    __pyx_v_channel = ((PyArrayObject *)values[1]);
    __pyx_v_special = ((PyArrayObject *)values[2]);
    __pyx_v_hist0 = ((PyArrayObject *)values[3]);
    __pyx_v_hist1 = ((PyArrayObject *)values[4]);
    __pyx_v_t_ofl = __Pyx_PyInt_from_py_npy_uint64(values[5]);<span class='error_goto'> if (unlikely((__pyx_v_t_ofl == (npy_uint64)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 122; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_t_lastsync = __Pyx_PyInt_from_py_npy_uint64(values[6]);<span class='error_goto'> if (unlikely((__pyx_v_t_lastsync == (npy_uint64)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 123; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_last_sync_number = __Pyx_PyInt_from_py_npy_uint64(values[7]);<span class='error_goto'> if (unlikely((__pyx_v_last_sync_number == (npy_uint64)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 124; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_syncs_per_sweep = __Pyx_PyInt_from_py_npy_uint64(values[8]);<span class='error_goto'> if (unlikely((__pyx_v_syncs_per_sweep == (npy_uint64)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 125; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_sweep_length = __Pyx_PyInt_from_py_npy_uint64(values[9]);<span class='error_goto'> if (unlikely((__pyx_v_sweep_length == (npy_uint64)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 126; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_min_sync_time = __Pyx_PyInt_from_py_npy_uint64(values[10]);<span class='error_goto'> if (unlikely((__pyx_v_min_sync_time == (npy_uint64)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 127; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_max_sync_time = __Pyx_PyInt_from_py_npy_uint64(values[11]);<span class='error_goto'> if (unlikely((__pyx_v_max_sync_time == (npy_uint64)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 128; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_wraparound = __Pyx_PyInt_from_py_npy_uint64(values[12]);<span class='error_goto'> if (unlikely((__pyx_v_wraparound == (npy_uint64)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 129; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_t2_time_factor = __Pyx_PyInt_from_py_npy_uint64(values[13]);<span class='error_goto'> if (unlikely((__pyx_v_t2_time_factor == (npy_uint64)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 130; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated", 1, 14, 14, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args));<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("measurement.lib.cython.PQ_T2_tools.T2_tools_src.T2_tools_v3.T2_live_filter_integrated", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_time), __pyx_ptype_5numpy_ndarray, 0, "time", 0)))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_channel), __pyx_ptype_5numpy_ndarray, 0, "channel", 0)))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 118; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_special), __pyx_ptype_5numpy_ndarray, 0, "special", 0)))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 119; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_hist0), __pyx_ptype_5numpy_ndarray, 0, "hist0", 0)))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 120; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_hist1), __pyx_ptype_5numpy_ndarray, 0, "hist1", 0)))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 121; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_r = __pyx_pf_11measurement_3lib_6cython_11PQ_T2_tools_12T2_tools_src_11T2_tools_v3_2T2_live_filter_integrated(__pyx_self, __pyx_v_time, __pyx_v_channel, __pyx_v_special, __pyx_v_hist0, __pyx_v_hist1, __pyx_v_t_ofl, __pyx_v_t_lastsync, __pyx_v_last_sync_number, __pyx_v_syncs_per_sweep, __pyx_v_sweep_length, __pyx_v_min_sync_time, __pyx_v_max_sync_time, __pyx_v_wraparound, __pyx_v_t2_time_factor);
  int __pyx_lineno = 0;
  const char *__pyx_filename = NULL;
  int __pyx_clineno = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line113")'> 113: </pre>
<pre id='line113' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line114")'> 114: </pre>
<pre id='line114' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line115")'> 115: @cython.boundscheck(False)</pre>
<pre id='line115' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line116")'> 116: @cython.wraparound(False)</pre>
<pre id='line116' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF46' onclick='toggleDiv("line117")'> 117: def T2_live_filter_integrated(cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] time not None,</pre>
<pre id='line117' class='code' style='background-color: #FFFF46'>
/* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":117
 * @cython.boundscheck(False)
 * @cython.wraparound(False)
 * def T2_live_filter_integrated(cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] time not None,             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *     cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] channel not None,
 *     cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] special not None,
 */

static PyObject *__pyx_pf_11measurement_3lib_6cython_11PQ_T2_tools_12T2_tools_src_11T2_tools_v3_2T2_live_filter_integrated(CYTHON_UNUSED PyObject *__pyx_self, PyArrayObject *__pyx_v_time, PyArrayObject *__pyx_v_channel, PyArrayObject *__pyx_v_special, PyArrayObject *__pyx_v_hist0, PyArrayObject *__pyx_v_hist1, __pyx_t_5numpy_uint64_t __pyx_v_t_ofl, __pyx_t_5numpy_uint64_t __pyx_v_t_lastsync, __pyx_t_5numpy_uint64_t __pyx_v_last_sync_number, __pyx_t_5numpy_uint64_t __pyx_v_syncs_per_sweep, __pyx_t_5numpy_uint64_t __pyx_v_sweep_length, __pyx_t_5numpy_uint64_t __pyx_v_min_sync_time, __pyx_t_5numpy_uint64_t __pyx_v_max_sync_time, __pyx_t_5numpy_uint64_t __pyx_v_wraparound, __pyx_t_5numpy_uint64_t __pyx_v_t2_time_factor) {
  __pyx_t_5numpy_uint64_t __pyx_v_k;
  __pyx_t_5numpy_uint64_t __pyx_v_l;
  __pyx_t_5numpy_uint64_t __pyx_v__sync_time;
  __pyx_t_5numpy_uint64_t __pyx_v__sweep_idx;
  __pyx_t_5numpy_uint64_t __pyx_v_length;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_channel;
  __Pyx_Buffer __pyx_pybuffer_channel;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_hist0;
  __Pyx_Buffer __pyx_pybuffer_hist0;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_hist1;
  __Pyx_Buffer __pyx_pybuffer_hist1;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_special;
  __Pyx_Buffer __pyx_pybuffer_special;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_time;
  __Pyx_Buffer __pyx_pybuffer_time;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("T2_live_filter_integrated", 0);
  __pyx_pybuffer_time.pybuffer.buf = NULL;
  __pyx_pybuffer_time.refcount = 0;
  __pyx_pybuffernd_time.data = NULL;
  __pyx_pybuffernd_time.rcbuffer = &amp;__pyx_pybuffer_time;
  __pyx_pybuffer_channel.pybuffer.buf = NULL;
  __pyx_pybuffer_channel.refcount = 0;
  __pyx_pybuffernd_channel.data = NULL;
  __pyx_pybuffernd_channel.rcbuffer = &amp;__pyx_pybuffer_channel;
  __pyx_pybuffer_special.pybuffer.buf = NULL;
  __pyx_pybuffer_special.refcount = 0;
  __pyx_pybuffernd_special.data = NULL;
  __pyx_pybuffernd_special.rcbuffer = &amp;__pyx_pybuffer_special;
  __pyx_pybuffer_hist0.pybuffer.buf = NULL;
  __pyx_pybuffer_hist0.refcount = 0;
  __pyx_pybuffernd_hist0.data = NULL;
  __pyx_pybuffernd_hist0.rcbuffer = &amp;__pyx_pybuffer_hist0;
  __pyx_pybuffer_hist1.pybuffer.buf = NULL;
  __pyx_pybuffer_hist1.refcount = 0;
  __pyx_pybuffernd_hist1.data = NULL;
  __pyx_pybuffernd_hist1.rcbuffer = &amp;__pyx_pybuffer_hist1;
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_time.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_time, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_uint32_t, PyBUF_FORMAT| PyBUF_C_CONTIGUOUS, 1, 0, __pyx_stack) == -1))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_pybuffernd_time.diminfo[0].strides = __pyx_pybuffernd_time.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_time.diminfo[0].shape = __pyx_pybuffernd_time.rcbuffer-&gt;pybuffer.shape[0];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_channel, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_uint32_t, PyBUF_FORMAT| PyBUF_C_CONTIGUOUS, 1, 0, __pyx_stack) == -1))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_pybuffernd_channel.diminfo[0].strides = __pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_channel.diminfo[0].shape = __pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer.shape[0];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_special.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_special, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_uint32_t, PyBUF_FORMAT| PyBUF_C_CONTIGUOUS, 1, 0, __pyx_stack) == -1))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_pybuffernd_special.diminfo[0].strides = __pyx_pybuffernd_special.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_special.diminfo[0].shape = __pyx_pybuffernd_special.rcbuffer-&gt;pybuffer.shape[0];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_hist0.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_hist0, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_uint8_t, PyBUF_FORMAT| PyBUF_C_CONTIGUOUS| PyBUF_WRITABLE, 2, 0, __pyx_stack) == -1))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_pybuffernd_hist0.diminfo[0].strides = __pyx_pybuffernd_hist0.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_hist0.diminfo[0].shape = __pyx_pybuffernd_hist0.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_hist0.diminfo[1].strides = __pyx_pybuffernd_hist0.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_hist0.diminfo[1].shape = __pyx_pybuffernd_hist0.rcbuffer-&gt;pybuffer.shape[1];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_hist1.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_hist1, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_uint8_t, PyBUF_FORMAT| PyBUF_C_CONTIGUOUS| PyBUF_WRITABLE, 2, 0, __pyx_stack) == -1))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_pybuffernd_hist1.diminfo[0].strides = __pyx_pybuffernd_hist1.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_hist1.diminfo[0].shape = __pyx_pybuffernd_hist1.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_hist1.diminfo[1].strides = __pyx_pybuffernd_hist1.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_hist1.diminfo[1].shape = __pyx_pybuffernd_hist1.rcbuffer-&gt;pybuffer.shape[1];

  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":117
 * @cython.boundscheck(False)
 * @cython.wraparound(False)
 * def T2_live_filter_integrated(cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] time not None,             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *     cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] channel not None,
 *     cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] special not None,
 */
  __pyx_k_tuple_21 = <span class='py_c_api'>PyTuple_Pack</span>(19, ((PyObject *)__pyx_n_s__time), ((PyObject *)__pyx_n_s__channel), ((PyObject *)__pyx_n_s__special), ((PyObject *)__pyx_n_s__hist0), ((PyObject *)__pyx_n_s__hist1), ((PyObject *)__pyx_n_s__t_ofl), ((PyObject *)__pyx_n_s__t_lastsync), ((PyObject *)__pyx_n_s__last_sync_number), ((PyObject *)__pyx_n_s__syncs_per_sweep), ((PyObject *)__pyx_n_s__sweep_length), ((PyObject *)__pyx_n_s__min_sync_time), ((PyObject *)__pyx_n_s__max_sync_time), ((PyObject *)__pyx_n_s__wraparound), ((PyObject *)__pyx_n_s__t2_time_factor), ((PyObject *)__pyx_n_s__k), ((PyObject *)__pyx_n_s__l), ((PyObject *)__pyx_n_s___sync_time), ((PyObject *)__pyx_n_s___sweep_idx), ((PyObject *)__pyx_n_s__length));<span class='error_goto'> if (unlikely(!__pyx_k_tuple_21)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_k_tuple_21);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_k_tuple_21));

  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":117
 * @cython.boundscheck(False)
 * @cython.wraparound(False)
 * def T2_live_filter_integrated(cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] time not None,             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *     cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] channel not None,
 *     cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] special not None,
 */
  __pyx_t_1 = PyCFunction_NewEx(&amp;__pyx_mdef_11measurement_3lib_6cython_11PQ_T2_tools_12T2_tools_src_11T2_tools_v3_3T2_live_filter_integrated, NULL, __pyx_n_s_20);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_23, __pyx_t_1) &lt; 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
  __pyx_k_codeobj_22 = (PyObject*)__Pyx_<span class='py_c_api'>PyCode_New</span>(14, 0, 19, 0, 0, __pyx_empty_bytes, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_k_tuple_21, __pyx_empty_tuple, __pyx_empty_tuple, __pyx_kp_s_19, __pyx_n_s_23, 117, __pyx_empty_bytes);<span class='error_goto'> if (unlikely(!__pyx_k_codeobj_22)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 117; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line118")'> 118:     cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] channel not None,</pre>
<pre id='line118' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line119")'> 119:     cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] special not None,</pre>
<pre id='line119' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line120")'> 120:     cnp.ndarray[cnp.uint8_t, ndim=2, mode='c'] hist0 not None,</pre>
<pre id='line120' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line121")'> 121:     cnp.ndarray[cnp.uint8_t, ndim=2, mode='c'] hist1 not None,</pre>
<pre id='line121' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line122")'> 122:     cnp.uint64_t t_ofl,</pre>
<pre id='line122' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line123")'> 123:     cnp.uint64_t t_lastsync,</pre>
<pre id='line123' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line124")'> 124:     cnp.uint64_t last_sync_number,</pre>
<pre id='line124' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line125")'> 125:     cnp.uint64_t syncs_per_sweep,</pre>
<pre id='line125' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line126")'> 126:     cnp.uint64_t sweep_length,</pre>
<pre id='line126' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line127")'> 127:     cnp.uint64_t min_sync_time,</pre>
<pre id='line127' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line128")'> 128:     cnp.uint64_t max_sync_time,</pre>
<pre id='line128' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line129")'> 129:     cnp.uint64_t wraparound,</pre>
<pre id='line129' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line130")'> 130:     cnp.uint64_t t2_time_factor):</pre>
<pre id='line130' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line131")'> 131:     """</pre>
<pre id='line131' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line132")'> 132:     This function expects as input decoded HH data:</pre>
<pre id='line132' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line133")'> 133:     - an array with time information,</pre>
<pre id='line133' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line134")'> 134:     - an array for the channel,</pre>
<pre id='line134' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line135")'> 135:     - an array containing the special bit,</pre>
<pre id='line135' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line136")'> 136:     and overflow information:</pre>
<pre id='line136' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line137")'> 137:     - the current overflow time,</pre>
<pre id='line137' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line138")'> 138:     - and the time of the last sync. (both start with zero and get updated by</pre>
<pre id='line138' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line139")'> 139:         calls of this function).</pre>
<pre id='line139' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line140")'> 140: </pre>
<pre id='line140' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line141")'> 141:     Returns for each event (syncs and overflows are not in the data anymore)</pre>
<pre id='line141' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line142")'> 142:     - the absolute time since msmt start (in bins)</pre>
<pre id='line142' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line143")'> 143:     - channel</pre>
<pre id='line143' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line144")'> 144:     - special bit,</pre>
<pre id='line144' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line145")'> 145:     - relative time to the last previous sync (in bins)</pre>
<pre id='line145' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line146")'> 146:     and overflow information (absolute overflow time and time of the last sync).</pre>
<pre id='line146' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line147")'> 147:     """</pre>
<pre id='line147' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line148")'> 148: </pre>
<pre id='line148' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line149")'> 149:     cdef cnp.uint64_t k</pre>
<pre id='line149' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line150")'> 150:     cdef cnp.uint64_t l = 0</pre>
<pre id='line150' class='code' style='background-color: #FFFFff'>
  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":150
 * 
 *     cdef cnp.uint64_t k
 *     cdef cnp.uint64_t l = 0             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *     cdef cnp.uint64_t _sync_time
 *     cdef cnp.uint64_t _sweep_idx
 */
  __pyx_v_l = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line151")'> 151:     cdef cnp.uint64_t _sync_time</pre>
<pre id='line151' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line152")'> 152:     cdef cnp.uint64_t _sweep_idx</pre>
<pre id='line152' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line153")'> 153: </pre>
<pre id='line153' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line154")'> 154:     cdef cnp.uint64_t length = time.shape[0]</pre>
<pre id='line154' class='code' style='background-color: #FFFFff'>
  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":154
 *     cdef cnp.uint64_t _sweep_idx
 * 
 *     cdef cnp.uint64_t length = time.shape[0]             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 * 
 *     for k in range(length):
 */
  __pyx_v_length = (__pyx_v_time-&gt;dimensions[0]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line155")'> 155: </pre>
<pre id='line155' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line156")'> 156:     for k in range(length):</pre>
<pre id='line156' class='code' style='background-color: #FFFFff'>
  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":156
 *     cdef cnp.uint64_t length = time.shape[0]
 * 
 *     for k in range(length):             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *         if channel[k] == 63:
 *             t_ofl += wraparound
 */
  __pyx_t_1 = __pyx_v_length;
  for (__pyx_t_2 = 0; __pyx_t_2 &lt; __pyx_t_1; __pyx_t_2+=1) {
    __pyx_v_k = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line157")'> 157:         if channel[k] == 63:</pre>
<pre id='line157' class='code' style='background-color: #FFFFff'>
    /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":157
 * 
 *     for k in range(length):
 *         if channel[k] == 63:             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             t_ofl += wraparound
 *             continue
 */
    __pyx_t_3 = __pyx_v_k;
    __pyx_t_4 = (((*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer.buf, __pyx_t_3, __pyx_pybuffernd_channel.diminfo[0].strides)) == 63) != 0);
    if (__pyx_t_4) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line158")'> 158:             t_ofl += wraparound</pre>
<pre id='line158' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":158
 *     for k in range(length):
 *         if channel[k] == 63:
 *             t_ofl += wraparound             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             continue
 * 
 */
      __pyx_v_t_ofl = (__pyx_v_t_ofl + __pyx_v_wraparound);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line159")'> 159:             continue</pre>
<pre id='line159' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":159
 *         if channel[k] == 63:
 *             t_ofl += wraparound
 *             continue             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 * 
 *         # syncs are basically pointless -- we only need for each element the time
 */
      goto __pyx_L3_continue;
      goto __pyx_L5;
    }
    __pyx_L5:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line160")'> 160: </pre>
<pre id='line160' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line161")'> 161:         # syncs are basically pointless -- we only need for each element the time</pre>
<pre id='line161' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line162")'> 162:         # since the last sync; also, save the sync number, this can be handy for</pre>
<pre id='line162' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line163")'> 163:         # filtering</pre>
<pre id='line163' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line164")'> 164:         if special[k] == 1:</pre>
<pre id='line164' class='code' style='background-color: #FFFFff'>
    /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":164
 *         # since the last sync; also, save the sync number, this can be handy for
 *         # filtering
 *         if special[k] == 1:             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             if channel[k] == 0:
 *                 t_lastsync = (time[k] + t_ofl) / t2_time_factor # the factor 2 comes from an extra bit. see HH docs.
 */
    __pyx_t_5 = __pyx_v_k;
    __pyx_t_4 = (((*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_special.rcbuffer-&gt;pybuffer.buf, __pyx_t_5, __pyx_pybuffernd_special.diminfo[0].strides)) == 1) != 0);
    if (__pyx_t_4) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line165")'> 165:             if channel[k] == 0:</pre>
<pre id='line165' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":165
 *         # filtering
 *         if special[k] == 1:
 *             if channel[k] == 0:             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *                 t_lastsync = (time[k] + t_ofl) / t2_time_factor # the factor 2 comes from an extra bit. see HH docs.
 *                 last_sync_number += 1
 */
      __pyx_t_6 = __pyx_v_k;
      __pyx_t_4 = (((*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer.buf, __pyx_t_6, __pyx_pybuffernd_channel.diminfo[0].strides)) == 0) != 0);
      if (__pyx_t_4) {
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line166")'> 166:                 t_lastsync = (time[k] + t_ofl) / t2_time_factor # the factor 2 comes from an extra bit. see HH docs.</pre>
<pre id='line166' class='code' style='background-color: #FFFFaa'>
        /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":166
 *         if special[k] == 1:
 *             if channel[k] == 0:
 *                 t_lastsync = (time[k] + t_ofl) / t2_time_factor # the factor 2 comes from an extra bit. see HH docs.             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *                 last_sync_number += 1
 *             continue
 */
        __pyx_t_7 = __pyx_v_k;
        __pyx_t_8 = ((*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_time.rcbuffer-&gt;pybuffer.buf, __pyx_t_7, __pyx_pybuffernd_time.diminfo[0].strides)) + __pyx_v_t_ofl);
        if (unlikely(__pyx_v_t2_time_factor == 0)) {
          #ifdef WITH_THREAD
          PyGILState_STATE __pyx_gilstate_save = PyGILState_Ensure();
          #endif
          <span class='py_c_api'>PyErr_Format</span>(PyExc_ZeroDivisionError, "integer division or modulo by zero");
          #ifdef WITH_THREAD
          PyGILState_Release(__pyx_gilstate_save);
          #endif
         <span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 166; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
        }
        __pyx_v_t_lastsync = (__pyx_t_8 / __pyx_v_t2_time_factor);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line167")'> 167:                 last_sync_number += 1</pre>
<pre id='line167' class='code' style='background-color: #FFFFff'>
        /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":167
 *             if channel[k] == 0:
 *                 t_lastsync = (time[k] + t_ofl) / t2_time_factor # the factor 2 comes from an extra bit. see HH docs.
 *                 last_sync_number += 1             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             continue
 * 
 */
        __pyx_v_last_sync_number = (__pyx_v_last_sync_number + 1);
        goto __pyx_L7;
      }
      __pyx_L7:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line168")'> 168:             continue</pre>
<pre id='line168' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":168
 *                 t_lastsync = (time[k] + t_ofl) / t2_time_factor # the factor 2 comes from an extra bit. see HH docs.
 *                 last_sync_number += 1
 *             continue             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 * 
 *         _sync_time = (t_ofl + time[k]) / t2_time_factor  - t_lastsync
 */
      goto __pyx_L3_continue;
      goto __pyx_L6;
    }
    __pyx_L6:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line169")'> 169: </pre>
<pre id='line169' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line170")'> 170:         _sync_time = (t_ofl + time[k]) / t2_time_factor  - t_lastsync</pre>
<pre id='line170' class='code' style='background-color: #FFFFaa'>
    /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":170
 *             continue
 * 
 *         _sync_time = (t_ofl + time[k]) / t2_time_factor  - t_lastsync             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *         if _sync_time &lt; min_sync_time or _sync_time &gt; max_sync_time:
 *             continue
 */
    __pyx_t_8 = __pyx_v_k;
    __pyx_t_9 = (__pyx_v_t_ofl + (*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_time.rcbuffer-&gt;pybuffer.buf, __pyx_t_8, __pyx_pybuffernd_time.diminfo[0].strides)));
    if (unlikely(__pyx_v_t2_time_factor == 0)) {
      #ifdef WITH_THREAD
      PyGILState_STATE __pyx_gilstate_save = PyGILState_Ensure();
      #endif
      <span class='py_c_api'>PyErr_Format</span>(PyExc_ZeroDivisionError, "integer division or modulo by zero");
      #ifdef WITH_THREAD
      PyGILState_Release(__pyx_gilstate_save);
      #endif
     <span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 170; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    }
    __pyx_v__sync_time = ((__pyx_t_9 / __pyx_v_t2_time_factor) - __pyx_v_t_lastsync);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line171")'> 171:         if _sync_time &lt; min_sync_time or _sync_time &gt; max_sync_time:</pre>
<pre id='line171' class='code' style='background-color: #FFFFff'>
    /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":171
 * 
 *         _sync_time = (t_ofl + time[k]) / t2_time_factor  - t_lastsync
 *         if _sync_time &lt; min_sync_time or _sync_time &gt; max_sync_time:             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             continue
 *         _sweep_idx=((last_sync_number-1)/syncs_per_sweep) % sweep_length
 */
    __pyx_t_4 = ((__pyx_v__sync_time &lt; __pyx_v_min_sync_time) != 0);
    if (!__pyx_t_4) {
      __pyx_t_10 = ((__pyx_v__sync_time &gt; __pyx_v_max_sync_time) != 0);
      __pyx_t_11 = __pyx_t_10;
    } else {
      __pyx_t_11 = __pyx_t_4;
    }
    if (__pyx_t_11) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line172")'> 172:             continue</pre>
<pre id='line172' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":172
 *         _sync_time = (t_ofl + time[k]) / t2_time_factor  - t_lastsync
 *         if _sync_time &lt; min_sync_time or _sync_time &gt; max_sync_time:
 *             continue             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *         _sweep_idx=((last_sync_number-1)/syncs_per_sweep) % sweep_length
 *         if channel[k] == 0:
 */
      goto __pyx_L3_continue;
      goto __pyx_L8;
    }
    __pyx_L8:;
</pre><pre class='line' style='background-color: #FFFF7f' onclick='toggleDiv("line173")'> 173:         _sweep_idx=((last_sync_number-1)/syncs_per_sweep) % sweep_length</pre>
<pre id='line173' class='code' style='background-color: #FFFF7f'>
    /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":173
 *         if _sync_time &lt; min_sync_time or _sync_time &gt; max_sync_time:
 *             continue
 *         _sweep_idx=((last_sync_number-1)/syncs_per_sweep) % sweep_length             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *         if channel[k] == 0:
 *             hist0[_sync_time,_sweep_idx] += 1
 */
    __pyx_t_9 = (__pyx_v_last_sync_number - 1);
    if (unlikely(__pyx_v_syncs_per_sweep == 0)) {
      #ifdef WITH_THREAD
      PyGILState_STATE __pyx_gilstate_save = PyGILState_Ensure();
      #endif
      <span class='py_c_api'>PyErr_Format</span>(PyExc_ZeroDivisionError, "integer division or modulo by zero");
      #ifdef WITH_THREAD
      PyGILState_Release(__pyx_gilstate_save);
      #endif
     <span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 173; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    }
    __pyx_t_12 = (__pyx_t_9 / __pyx_v_syncs_per_sweep);
    if (unlikely(__pyx_v_sweep_length == 0)) {
      #ifdef WITH_THREAD
      PyGILState_STATE __pyx_gilstate_save = PyGILState_Ensure();
      #endif
      <span class='py_c_api'>PyErr_Format</span>(PyExc_ZeroDivisionError, "integer division or modulo by zero");
      #ifdef WITH_THREAD
      PyGILState_Release(__pyx_gilstate_save);
      #endif
     <span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 173; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    }
    __pyx_v__sweep_idx = (__pyx_t_12 % __pyx_v_sweep_length);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line174")'> 174:         if channel[k] == 0:</pre>
<pre id='line174' class='code' style='background-color: #FFFFff'>
    /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":174
 *             continue
 *         _sweep_idx=((last_sync_number-1)/syncs_per_sweep) % sweep_length
 *         if channel[k] == 0:             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             hist0[_sync_time,_sweep_idx] += 1
 *         elif channel[k] == 1:
 */
    __pyx_t_12 = __pyx_v_k;
    __pyx_t_11 = (((*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer.buf, __pyx_t_12, __pyx_pybuffernd_channel.diminfo[0].strides)) == 0) != 0);
    if (__pyx_t_11) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line175")'> 175:             hist0[_sync_time,_sweep_idx] += 1</pre>
<pre id='line175' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":175
 *         _sweep_idx=((last_sync_number-1)/syncs_per_sweep) % sweep_length
 *         if channel[k] == 0:
 *             hist0[_sync_time,_sweep_idx] += 1             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *         elif channel[k] == 1:
 *             hist1[_sync_time,_sweep_idx] += 1
 */
      __pyx_t_9 = __pyx_v__sync_time;
      __pyx_t_13 = __pyx_v__sweep_idx;
      *__Pyx_BufPtrCContig2d(__pyx_t_5numpy_uint8_t *, __pyx_pybuffernd_hist0.rcbuffer-&gt;pybuffer.buf, __pyx_t_9, __pyx_pybuffernd_hist0.diminfo[0].strides, __pyx_t_13, __pyx_pybuffernd_hist0.diminfo[1].strides) += 1;
      goto __pyx_L9;
    }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line176")'> 176:         elif channel[k] == 1:</pre>
<pre id='line176' class='code' style='background-color: #FFFFff'>
    /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":176
 *         if channel[k] == 0:
 *             hist0[_sync_time,_sweep_idx] += 1
 *         elif channel[k] == 1:             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             hist1[_sync_time,_sweep_idx] += 1
 *         l += 1
 */
    __pyx_t_14 = __pyx_v_k;
    __pyx_t_11 = (((*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer.buf, __pyx_t_14, __pyx_pybuffernd_channel.diminfo[0].strides)) == 1) != 0);
    if (__pyx_t_11) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line177")'> 177:             hist1[_sync_time,_sweep_idx] += 1</pre>
<pre id='line177' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":177
 *             hist0[_sync_time,_sweep_idx] += 1
 *         elif channel[k] == 1:
 *             hist1[_sync_time,_sweep_idx] += 1             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *         l += 1
 * 
 */
      __pyx_t_15 = __pyx_v__sync_time;
      __pyx_t_16 = __pyx_v__sweep_idx;
      *__Pyx_BufPtrCContig2d(__pyx_t_5numpy_uint8_t *, __pyx_pybuffernd_hist1.rcbuffer-&gt;pybuffer.buf, __pyx_t_15, __pyx_pybuffernd_hist1.diminfo[0].strides, __pyx_t_16, __pyx_pybuffernd_hist1.diminfo[1].strides) += 1;
      goto __pyx_L9;
    }
    __pyx_L9:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line178")'> 178:         l += 1</pre>
<pre id='line178' class='code' style='background-color: #FFFFff'>
    /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":178
 *         elif channel[k] == 1:
 *             hist1[_sync_time,_sweep_idx] += 1
 *         l += 1             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 * 
 *     return hist0, hist1, l, t_ofl, t_lastsync, last_sync_number
 */
    __pyx_v_l = (__pyx_v_l + 1);
    __pyx_L3_continue:;
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line179")'> 179: </pre>
<pre id='line179' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF0a' onclick='toggleDiv("line180")'> 180:     return hist0, hist1, l, t_ofl, t_lastsync, last_sync_number</pre>
<pre id='line180' class='code' style='background-color: #FFFF0a'>
  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":180
 *         l += 1
 * 
 *     return hist0, hist1, l, t_ofl, t_lastsync, last_sync_number             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 * 
 * 
 */
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_17 = __Pyx_PyInt_to_py_npy_uint64(__pyx_v_l);<span class='error_goto'> if (unlikely(!__pyx_t_17)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 180; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_17);
  __pyx_t_18 = __Pyx_PyInt_to_py_npy_uint64(__pyx_v_t_ofl);<span class='error_goto'> if (unlikely(!__pyx_t_18)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 180; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_18);
  __pyx_t_19 = __Pyx_PyInt_to_py_npy_uint64(__pyx_v_t_lastsync);<span class='error_goto'> if (unlikely(!__pyx_t_19)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 180; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_19);
  __pyx_t_20 = __Pyx_PyInt_to_py_npy_uint64(__pyx_v_last_sync_number);<span class='error_goto'> if (unlikely(!__pyx_t_20)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 180; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_20);
  __pyx_t_21 = <span class='py_c_api'>PyTuple_New</span>(6);<span class='error_goto'> if (unlikely(!__pyx_t_21)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 180; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_21);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_hist0));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_21, 0, ((PyObject *)__pyx_v_hist0));
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_v_hist0));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_hist1));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_21, 1, ((PyObject *)__pyx_v_hist1));
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_v_hist1));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_21, 2, __pyx_t_17);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_17);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_21, 3, __pyx_t_18);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_18);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_21, 4, __pyx_t_19);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_19);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_21, 5, __pyx_t_20);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_20);
  __pyx_t_17 = 0;
  __pyx_t_18 = 0;
  __pyx_t_19 = 0;
  __pyx_t_20 = 0;
  __pyx_r = ((PyObject *)__pyx_t_21);
  __pyx_t_21 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_17);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_18);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_19);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_20);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_21);
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_hist0.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_hist1.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_special.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_time.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("measurement.lib.cython.PQ_T2_tools.T2_tools_src.T2_tools_v3.T2_live_filter_integrated", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_hist0.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_hist1.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_special.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_time.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}

/* Python wrapper */
static PyObject *__pyx_pw_11measurement_3lib_6cython_11PQ_T2_tools_12T2_tools_src_11T2_tools_v3_5T2_live_filter_integrated_RT(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds); /*proto*/
static char __pyx_doc_11measurement_3lib_6cython_11PQ_T2_tools_12T2_tools_src_11T2_tools_v3_4T2_live_filter_integrated_RT[] = "\n    Very similar to T2_live_filter_integrated, only it expects 2 syncs per datapoint at fixed delay.\n    By comparing sync dt's it checks if a sync went missing and corrects for it by updating last_sync_nr\n\n\n    This function expects as input decoded HH data:\n    - an array with time information,\n    - an array for the channel,\n    - an array containing the special bit,\n    and overflow information: \n    - the current overflow time,\n    - the time of the last sync. (both start with zero and get updated by\n        calls of this function).\n    - the min and max time between sync and photon counts\n    - and the fixed time between two syncs associated with 1 datapoint\n    \n    Returns for each event (syncs and overflows are not in the data anymore)\n    - the absolute time since msmt start (in bins)\n    - channel\n    - special bit,\n    - relative time to the last previous sync (in bins)\n    and overflow information (absolute overflow time and time of the last sync).\n    ";
static PyMethodDef __pyx_mdef_11measurement_3lib_6cython_11PQ_T2_tools_12T2_tools_src_11T2_tools_v3_5T2_live_filter_integrated_RT = {<span class='pyx_macro_api'>__Pyx_NAMESTR</span>("T2_live_filter_integrated_RT"), (PyCFunction)__pyx_pw_11measurement_3lib_6cython_11PQ_T2_tools_12T2_tools_src_11T2_tools_v3_5T2_live_filter_integrated_RT, METH_VARARGS|METH_KEYWORDS, <span class='pyx_macro_api'>__Pyx_DOCSTR</span>(__pyx_doc_11measurement_3lib_6cython_11PQ_T2_tools_12T2_tools_src_11T2_tools_v3_4T2_live_filter_integrated_RT)};
static PyObject *__pyx_pw_11measurement_3lib_6cython_11PQ_T2_tools_12T2_tools_src_11T2_tools_v3_5T2_live_filter_integrated_RT(PyObject *__pyx_self, PyObject *__pyx_args, PyObject *__pyx_kwds) {
  PyArrayObject *__pyx_v_time = 0;
  PyArrayObject *__pyx_v_channel = 0;
  PyArrayObject *__pyx_v_special = 0;
  PyArrayObject *__pyx_v_hist0 = 0;
  PyArrayObject *__pyx_v_hist1 = 0;
  __pyx_t_5numpy_uint64_t __pyx_v_t_ofl;
  __pyx_t_5numpy_uint64_t __pyx_v_t_lastsync;
  __pyx_t_5numpy_uint64_t __pyx_v_last_sync_number;
  __pyx_t_5numpy_uint64_t __pyx_v_sweep_length;
  __pyx_t_5numpy_uint64_t __pyx_v_min_sync_time;
  __pyx_t_5numpy_uint64_t __pyx_v_max_sync_time;
  __pyx_t_5numpy_uint64_t __pyx_v_dt_sync_time;
  __pyx_t_5numpy_uint64_t __pyx_v_wraparound;
  __pyx_t_5numpy_uint64_t __pyx_v_t2_time_factor;
  PyObject *__pyx_r = 0;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("T2_live_filter_integrated_RT (wrapper)", 0);
  {
    static PyObject **__pyx_pyargnames[] = {&amp;__pyx_n_s__time,&amp;__pyx_n_s__channel,&amp;__pyx_n_s__special,&amp;__pyx_n_s__hist0,&amp;__pyx_n_s__hist1,&amp;__pyx_n_s__t_ofl,&amp;__pyx_n_s__t_lastsync,&amp;__pyx_n_s__last_sync_number,&amp;__pyx_n_s__sweep_length,&amp;__pyx_n_s__min_sync_time,&amp;__pyx_n_s__max_sync_time,&amp;__pyx_n_s__dt_sync_time,&amp;__pyx_n_s__wraparound,&amp;__pyx_n_s__t2_time_factor,0};
    PyObject* values[14] = {0,0,0,0,0,0,0,0,0,0,0,0,0,0};
    if (unlikely(__pyx_kwds)) {
      Py_ssize_t kw_args;
      const Py_ssize_t pos_args = <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args);
      switch (pos_args) {
        case 14: values[13] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 13);
        case 13: values[12] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 12);
        case 12: values[11] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 11);
        case 11: values[10] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 10);
        case 10: values[9] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 9);
        case  9: values[8] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 8);
        case  8: values[7] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 7);
        case  7: values[6] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 6);
        case  6: values[5] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 5);
        case  5: values[4] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 4);
        case  4: values[3] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 3);
        case  3: values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
        case  2: values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
        case  1: values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
        case  0: break;
        default: goto __pyx_L5_argtuple_error;
      }
      kw_args = <span class='py_c_api'>PyDict_Size</span>(__pyx_kwds);
      switch (pos_args) {
        case  0:
        if (likely((values[0] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__time)) != 0)) kw_args--;
        else goto __pyx_L5_argtuple_error;
        case  1:
        if (likely((values[1] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__channel)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated_RT", 1, 14, 14, 1);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 186; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  2:
        if (likely((values[2] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__special)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated_RT", 1, 14, 14, 2);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 186; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  3:
        if (likely((values[3] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__hist0)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated_RT", 1, 14, 14, 3);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 186; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  4:
        if (likely((values[4] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__hist1)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated_RT", 1, 14, 14, 4);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 186; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  5:
        if (likely((values[5] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__t_ofl)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated_RT", 1, 14, 14, 5);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 186; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  6:
        if (likely((values[6] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__t_lastsync)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated_RT", 1, 14, 14, 6);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 186; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  7:
        if (likely((values[7] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__last_sync_number)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated_RT", 1, 14, 14, 7);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 186; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  8:
        if (likely((values[8] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__sweep_length)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated_RT", 1, 14, 14, 8);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 186; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case  9:
        if (likely((values[9] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__min_sync_time)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated_RT", 1, 14, 14, 9);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 186; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case 10:
        if (likely((values[10] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__max_sync_time)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated_RT", 1, 14, 14, 10);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 186; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case 11:
        if (likely((values[11] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__dt_sync_time)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated_RT", 1, 14, 14, 11);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 186; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case 12:
        if (likely((values[12] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__wraparound)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated_RT", 1, 14, 14, 12);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 186; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
        case 13:
        if (likely((values[13] = <span class='py_c_api'>PyDict_GetItem</span>(__pyx_kwds, __pyx_n_s__t2_time_factor)) != 0)) kw_args--;
        else {
          <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated_RT", 1, 14, 14, 13);<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 186; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
        }
      }
      if (unlikely(kw_args &gt; 0)) {
        if (unlikely(<span class='pyx_c_api'>__Pyx_ParseOptionalKeywords</span>(__pyx_kwds, __pyx_pyargnames, 0, values, pos_args, "T2_live_filter_integrated_RT") &lt; 0))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 186; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
      }
    } else if (<span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args) != 14) {
      goto __pyx_L5_argtuple_error;
    } else {
      values[0] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 0);
      values[1] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 1);
      values[2] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 2);
      values[3] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 3);
      values[4] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 4);
      values[5] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 5);
      values[6] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 6);
      values[7] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 7);
      values[8] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 8);
      values[9] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 9);
      values[10] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 10);
      values[11] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 11);
      values[12] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 12);
      values[13] = <span class='py_macro_api'>PyTuple_GET_ITEM</span>(__pyx_args, 13);
    }
    __pyx_v_time = ((PyArrayObject *)values[0]);
    __pyx_v_channel = ((PyArrayObject *)values[1]);
    __pyx_v_special = ((PyArrayObject *)values[2]);
    __pyx_v_hist0 = ((PyArrayObject *)values[3]);
    __pyx_v_hist1 = ((PyArrayObject *)values[4]);
    __pyx_v_t_ofl = __Pyx_PyInt_from_py_npy_uint64(values[5]);<span class='error_goto'> if (unlikely((__pyx_v_t_ofl == (npy_uint64)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 191; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_t_lastsync = __Pyx_PyInt_from_py_npy_uint64(values[6]);<span class='error_goto'> if (unlikely((__pyx_v_t_lastsync == (npy_uint64)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 192; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_last_sync_number = __Pyx_PyInt_from_py_npy_uint64(values[7]);<span class='error_goto'> if (unlikely((__pyx_v_last_sync_number == (npy_uint64)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 193; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_sweep_length = __Pyx_PyInt_from_py_npy_uint64(values[8]);<span class='error_goto'> if (unlikely((__pyx_v_sweep_length == (npy_uint64)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 194; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_min_sync_time = __Pyx_PyInt_from_py_npy_uint64(values[9]);<span class='error_goto'> if (unlikely((__pyx_v_min_sync_time == (npy_uint64)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 195; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_max_sync_time = __Pyx_PyInt_from_py_npy_uint64(values[10]);<span class='error_goto'> if (unlikely((__pyx_v_max_sync_time == (npy_uint64)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 196; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_dt_sync_time = __Pyx_PyInt_from_py_npy_uint64(values[11]);<span class='error_goto'> if (unlikely((__pyx_v_dt_sync_time == (npy_uint64)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 197; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_wraparound = __Pyx_PyInt_from_py_npy_uint64(values[12]);<span class='error_goto'> if (unlikely((__pyx_v_wraparound == (npy_uint64)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 198; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
    __pyx_v_t2_time_factor = __Pyx_PyInt_from_py_npy_uint64(values[13]);<span class='error_goto'> if (unlikely((__pyx_v_t2_time_factor == (npy_uint64)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 199; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
  }
  goto __pyx_L4_argument_unpacking_done;
  __pyx_L5_argtuple_error:;
  <span class='pyx_c_api'>__Pyx_RaiseArgtupleInvalid</span>("T2_live_filter_integrated_RT", 1, 14, 14, <span class='py_macro_api'>PyTuple_GET_SIZE</span>(__pyx_args));<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 186; __pyx_clineno = __LINE__; goto __pyx_L3_error;}</span>
  __pyx_L3_error:;
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("measurement.lib.cython.PQ_T2_tools.T2_tools_src.T2_tools_v3.T2_live_filter_integrated_RT", __pyx_clineno, __pyx_lineno, __pyx_filename);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return NULL;
  __pyx_L4_argument_unpacking_done:;
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_time), __pyx_ptype_5numpy_ndarray, 0, "time", 0)))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 186; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_channel), __pyx_ptype_5numpy_ndarray, 0, "channel", 0)))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 187; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_special), __pyx_ptype_5numpy_ndarray, 0, "special", 0)))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 188; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_hist0), __pyx_ptype_5numpy_ndarray, 0, "hist0", 0)))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 189; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  if (unlikely(!<span class='pyx_c_api'>__Pyx_ArgTypeTest</span>(((PyObject *)__pyx_v_hist1), __pyx_ptype_5numpy_ndarray, 0, "hist1", 0)))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 190; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  __pyx_r = __pyx_pf_11measurement_3lib_6cython_11PQ_T2_tools_12T2_tools_src_11T2_tools_v3_4T2_live_filter_integrated_RT(__pyx_self, __pyx_v_time, __pyx_v_channel, __pyx_v_special, __pyx_v_hist0, __pyx_v_hist1, __pyx_v_t_ofl, __pyx_v_t_lastsync, __pyx_v_last_sync_number, __pyx_v_sweep_length, __pyx_v_min_sync_time, __pyx_v_max_sync_time, __pyx_v_dt_sync_time, __pyx_v_wraparound, __pyx_v_t2_time_factor);
  int __pyx_lineno = 0;
  const char *__pyx_filename = NULL;
  int __pyx_clineno = 0;
  goto __pyx_L0;
  __pyx_L1_error:;
  __pyx_r = NULL;
  __pyx_L0:;
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line181")'> 181: </pre>
<pre id='line181' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line182")'> 182: </pre>
<pre id='line182' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line183")'> 183: </pre>
<pre id='line183' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line184")'> 184: @cython.boundscheck(False)</pre>
<pre id='line184' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line185")'> 185: @cython.wraparound(False)</pre>
<pre id='line185' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF52' onclick='toggleDiv("line186")'> 186: def T2_live_filter_integrated_RT(cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] time not None,</pre>
<pre id='line186' class='code' style='background-color: #FFFF52'>
/* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":186
 * @cython.boundscheck(False)
 * @cython.wraparound(False)
 * def T2_live_filter_integrated_RT(cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] time not None,             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *     cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] channel not None,
 *     cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] special not None,
 */

static PyObject *__pyx_pf_11measurement_3lib_6cython_11PQ_T2_tools_12T2_tools_src_11T2_tools_v3_4T2_live_filter_integrated_RT(CYTHON_UNUSED PyObject *__pyx_self, PyArrayObject *__pyx_v_time, PyArrayObject *__pyx_v_channel, PyArrayObject *__pyx_v_special, PyArrayObject *__pyx_v_hist0, PyArrayObject *__pyx_v_hist1, __pyx_t_5numpy_uint64_t __pyx_v_t_ofl, __pyx_t_5numpy_uint64_t __pyx_v_t_lastsync, __pyx_t_5numpy_uint64_t __pyx_v_last_sync_number, __pyx_t_5numpy_uint64_t __pyx_v_sweep_length, __pyx_t_5numpy_uint64_t __pyx_v_min_sync_time, __pyx_t_5numpy_uint64_t __pyx_v_max_sync_time, __pyx_t_5numpy_uint64_t __pyx_v_dt_sync_time, __pyx_t_5numpy_uint64_t __pyx_v_wraparound, __pyx_t_5numpy_uint64_t __pyx_v_t2_time_factor) {
  __pyx_t_5numpy_uint64_t __pyx_v_k;
  __pyx_t_5numpy_uint64_t __pyx_v_l;
  __pyx_t_5numpy_uint64_t __pyx_v_syncs_per_sweep;
  __pyx_t_5numpy_uint64_t __pyx_v__sync_time;
  __pyx_t_5numpy_uint64_t __pyx_v__sweep_idx;
  __pyx_t_5numpy_uint64_t __pyx_v_length;
  PyObject *__pyx_v_cur_sync = NULL;
  PyObject *__pyx_v_dt = NULL;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_channel;
  __Pyx_Buffer __pyx_pybuffer_channel;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_hist0;
  __Pyx_Buffer __pyx_pybuffer_hist0;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_hist1;
  __Pyx_Buffer __pyx_pybuffer_hist1;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_special;
  __Pyx_Buffer __pyx_pybuffer_special;
  __Pyx_LocalBuf_ND __pyx_pybuffernd_time;
  __Pyx_Buffer __pyx_pybuffer_time;
  PyObject *__pyx_r = NULL;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("T2_live_filter_integrated_RT", 0);
  __pyx_pybuffer_time.pybuffer.buf = NULL;
  __pyx_pybuffer_time.refcount = 0;
  __pyx_pybuffernd_time.data = NULL;
  __pyx_pybuffernd_time.rcbuffer = &amp;__pyx_pybuffer_time;
  __pyx_pybuffer_channel.pybuffer.buf = NULL;
  __pyx_pybuffer_channel.refcount = 0;
  __pyx_pybuffernd_channel.data = NULL;
  __pyx_pybuffernd_channel.rcbuffer = &amp;__pyx_pybuffer_channel;
  __pyx_pybuffer_special.pybuffer.buf = NULL;
  __pyx_pybuffer_special.refcount = 0;
  __pyx_pybuffernd_special.data = NULL;
  __pyx_pybuffernd_special.rcbuffer = &amp;__pyx_pybuffer_special;
  __pyx_pybuffer_hist0.pybuffer.buf = NULL;
  __pyx_pybuffer_hist0.refcount = 0;
  __pyx_pybuffernd_hist0.data = NULL;
  __pyx_pybuffernd_hist0.rcbuffer = &amp;__pyx_pybuffer_hist0;
  __pyx_pybuffer_hist1.pybuffer.buf = NULL;
  __pyx_pybuffer_hist1.refcount = 0;
  __pyx_pybuffernd_hist1.data = NULL;
  __pyx_pybuffernd_hist1.rcbuffer = &amp;__pyx_pybuffer_hist1;
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_time.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_time, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_uint32_t, PyBUF_FORMAT| PyBUF_C_CONTIGUOUS, 1, 0, __pyx_stack) == -1))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 186; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_pybuffernd_time.diminfo[0].strides = __pyx_pybuffernd_time.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_time.diminfo[0].shape = __pyx_pybuffernd_time.rcbuffer-&gt;pybuffer.shape[0];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_channel, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_uint32_t, PyBUF_FORMAT| PyBUF_C_CONTIGUOUS, 1, 0, __pyx_stack) == -1))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 186; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_pybuffernd_channel.diminfo[0].strides = __pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_channel.diminfo[0].shape = __pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer.shape[0];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_special.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_special, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_uint32_t, PyBUF_FORMAT| PyBUF_C_CONTIGUOUS, 1, 0, __pyx_stack) == -1))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 186; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_pybuffernd_special.diminfo[0].strides = __pyx_pybuffernd_special.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_special.diminfo[0].shape = __pyx_pybuffernd_special.rcbuffer-&gt;pybuffer.shape[0];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_hist0.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_hist0, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_uint8_t, PyBUF_FORMAT| PyBUF_C_CONTIGUOUS| PyBUF_WRITABLE, 2, 0, __pyx_stack) == -1))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 186; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_pybuffernd_hist0.diminfo[0].strides = __pyx_pybuffernd_hist0.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_hist0.diminfo[0].shape = __pyx_pybuffernd_hist0.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_hist0.diminfo[1].strides = __pyx_pybuffernd_hist0.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_hist0.diminfo[1].shape = __pyx_pybuffernd_hist0.rcbuffer-&gt;pybuffer.shape[1];
  {
    __Pyx_BufFmt_StackElem __pyx_stack[1];
    if (unlikely(<span class='pyx_c_api'>__Pyx_GetBufferAndValidate</span>(&amp;__pyx_pybuffernd_hist1.rcbuffer-&gt;pybuffer, (PyObject*)__pyx_v_hist1, &amp;__Pyx_TypeInfo_nn___pyx_t_5numpy_uint8_t, PyBUF_FORMAT| PyBUF_C_CONTIGUOUS| PyBUF_WRITABLE, 2, 0, __pyx_stack) == -1))<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 186; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  }
  __pyx_pybuffernd_hist1.diminfo[0].strides = __pyx_pybuffernd_hist1.rcbuffer-&gt;pybuffer.strides[0]; __pyx_pybuffernd_hist1.diminfo[0].shape = __pyx_pybuffernd_hist1.rcbuffer-&gt;pybuffer.shape[0]; __pyx_pybuffernd_hist1.diminfo[1].strides = __pyx_pybuffernd_hist1.rcbuffer-&gt;pybuffer.strides[1]; __pyx_pybuffernd_hist1.diminfo[1].shape = __pyx_pybuffernd_hist1.rcbuffer-&gt;pybuffer.shape[1];

  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":186
 * @cython.boundscheck(False)
 * @cython.wraparound(False)
 * def T2_live_filter_integrated_RT(cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] time not None,             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *     cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] channel not None,
 *     cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] special not None,
 */
  __pyx_k_tuple_24 = <span class='py_c_api'>PyTuple_Pack</span>(22, ((PyObject *)__pyx_n_s__time), ((PyObject *)__pyx_n_s__channel), ((PyObject *)__pyx_n_s__special), ((PyObject *)__pyx_n_s__hist0), ((PyObject *)__pyx_n_s__hist1), ((PyObject *)__pyx_n_s__t_ofl), ((PyObject *)__pyx_n_s__t_lastsync), ((PyObject *)__pyx_n_s__last_sync_number), ((PyObject *)__pyx_n_s__sweep_length), ((PyObject *)__pyx_n_s__min_sync_time), ((PyObject *)__pyx_n_s__max_sync_time), ((PyObject *)__pyx_n_s__dt_sync_time), ((PyObject *)__pyx_n_s__wraparound), ((PyObject *)__pyx_n_s__t2_time_factor), ((PyObject *)__pyx_n_s__k), ((PyObject *)__pyx_n_s__l), ((PyObject *)__pyx_n_s__syncs_per_sweep), ((PyObject *)__pyx_n_s___sync_time), ((PyObject *)__pyx_n_s___sweep_idx), ((PyObject *)__pyx_n_s__length), ((PyObject *)__pyx_n_s__cur_sync), ((PyObject *)__pyx_n_s__dt));<span class='error_goto'> if (unlikely(!__pyx_k_tuple_24)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 186; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_k_tuple_24);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_k_tuple_24));

  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":186
 * @cython.boundscheck(False)
 * @cython.wraparound(False)
 * def T2_live_filter_integrated_RT(cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] time not None,             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *     cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] channel not None,
 *     cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] special not None,
 */
  __pyx_t_1 = PyCFunction_NewEx(&amp;__pyx_mdef_11measurement_3lib_6cython_11PQ_T2_tools_12T2_tools_src_11T2_tools_v3_5T2_live_filter_integrated_RT, NULL, __pyx_n_s_20);<span class='error_goto'> if (unlikely(!__pyx_t_1)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 186; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_1);
  if (<span class='py_c_api'>PyDict_SetItem</span>(__pyx_d, __pyx_n_s_26, __pyx_t_1) &lt; 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 186; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_1); __pyx_t_1 = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line187")'> 187:     cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] channel not None,</pre>
<pre id='line187' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line188")'> 188:     cnp.ndarray[cnp.uint32_t, ndim=1, mode='c'] special not None,</pre>
<pre id='line188' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line189")'> 189:     cnp.ndarray[cnp.uint8_t, ndim=2, mode='c'] hist0 not None,</pre>
<pre id='line189' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line190")'> 190:     cnp.ndarray[cnp.uint8_t, ndim=2, mode='c'] hist1 not None,</pre>
<pre id='line190' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line191")'> 191:     cnp.uint64_t t_ofl,</pre>
<pre id='line191' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line192")'> 192:     cnp.uint64_t t_lastsync,</pre>
<pre id='line192' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line193")'> 193:     cnp.uint64_t last_sync_number,</pre>
<pre id='line193' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line194")'> 194:     cnp.uint64_t sweep_length,</pre>
<pre id='line194' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line195")'> 195:     cnp.uint64_t min_sync_time,</pre>
<pre id='line195' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line196")'> 196:     cnp.uint64_t max_sync_time,</pre>
<pre id='line196' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line197")'> 197:     cnp.uint64_t dt_sync_time,</pre>
<pre id='line197' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line198")'> 198:     cnp.uint64_t wraparound,</pre>
<pre id='line198' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line199")'> 199:     cnp.uint64_t t2_time_factor):</pre>
<pre id='line199' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line200")'> 200:     """</pre>
<pre id='line200' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line201")'> 201:     Very similar to T2_live_filter_integrated, only it expects 2 syncs per datapoint at fixed delay.</pre>
<pre id='line201' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line202")'> 202:     By comparing sync dt's it checks if a sync went missing and corrects for it by updating last_sync_nr</pre>
<pre id='line202' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line203")'> 203: </pre>
<pre id='line203' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line204")'> 204: </pre>
<pre id='line204' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line205")'> 205:     This function expects as input decoded HH data:</pre>
<pre id='line205' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line206")'> 206:     - an array with time information,</pre>
<pre id='line206' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line207")'> 207:     - an array for the channel,</pre>
<pre id='line207' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line208")'> 208:     - an array containing the special bit,</pre>
<pre id='line208' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line209")'> 209:     and overflow information:</pre>
<pre id='line209' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line210")'> 210:     - the current overflow time,</pre>
<pre id='line210' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line211")'> 211:     - the time of the last sync. (both start with zero and get updated by</pre>
<pre id='line211' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line212")'> 212:         calls of this function).</pre>
<pre id='line212' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line213")'> 213:     - the min and max time between sync and photon counts</pre>
<pre id='line213' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line214")'> 214:     - and the fixed time between two syncs associated with 1 datapoint</pre>
<pre id='line214' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line215")'> 215: </pre>
<pre id='line215' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line216")'> 216:     Returns for each event (syncs and overflows are not in the data anymore)</pre>
<pre id='line216' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line217")'> 217:     - the absolute time since msmt start (in bins)</pre>
<pre id='line217' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line218")'> 218:     - channel</pre>
<pre id='line218' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line219")'> 219:     - special bit,</pre>
<pre id='line219' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line220")'> 220:     - relative time to the last previous sync (in bins)</pre>
<pre id='line220' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line221")'> 221:     and overflow information (absolute overflow time and time of the last sync).</pre>
<pre id='line221' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line222")'> 222:     """</pre>
<pre id='line222' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line223")'> 223: </pre>
<pre id='line223' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line224")'> 224:     cdef cnp.uint64_t k</pre>
<pre id='line224' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line225")'> 225:     cdef cnp.uint64_t l = 0</pre>
<pre id='line225' class='code' style='background-color: #FFFFff'>
  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":225
 * 
 *     cdef cnp.uint64_t k
 *     cdef cnp.uint64_t l = 0             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *     cdef cnp.uint64_t syncs_per_sweep = 2
 *     cdef cnp.uint64_t _sync_time
 */
  __pyx_v_l = 0;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line226")'> 226:     cdef cnp.uint64_t syncs_per_sweep = 2</pre>
<pre id='line226' class='code' style='background-color: #FFFFff'>
  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":226
 *     cdef cnp.uint64_t k
 *     cdef cnp.uint64_t l = 0
 *     cdef cnp.uint64_t syncs_per_sweep = 2             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *     cdef cnp.uint64_t _sync_time
 *     cdef cnp.uint64_t _sweep_idx
 */
  __pyx_v_syncs_per_sweep = 2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line227")'> 227:     cdef cnp.uint64_t _sync_time</pre>
<pre id='line227' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line228")'> 228:     cdef cnp.uint64_t _sweep_idx</pre>
<pre id='line228' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line229")'> 229: </pre>
<pre id='line229' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line230")'> 230:     cdef cnp.uint64_t length = time.shape[0]</pre>
<pre id='line230' class='code' style='background-color: #FFFFff'>
  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":230
 *     cdef cnp.uint64_t _sweep_idx
 * 
 *     cdef cnp.uint64_t length = time.shape[0]             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *     for k in range(length):
 *         if channel[k] == 63:
 */
  __pyx_v_length = (__pyx_v_time-&gt;dimensions[0]);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line231")'> 231:     for k in range(length):</pre>
<pre id='line231' class='code' style='background-color: #FFFFff'>
  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":231
 * 
 *     cdef cnp.uint64_t length = time.shape[0]
 *     for k in range(length):             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *         if channel[k] == 63:
 *             t_ofl += wraparound
 */
  __pyx_t_1 = __pyx_v_length;
  for (__pyx_t_2 = 0; __pyx_t_2 &lt; __pyx_t_1; __pyx_t_2+=1) {
    __pyx_v_k = __pyx_t_2;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line232")'> 232:         if channel[k] == 63:</pre>
<pre id='line232' class='code' style='background-color: #FFFFff'>
    /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":232
 *     cdef cnp.uint64_t length = time.shape[0]
 *     for k in range(length):
 *         if channel[k] == 63:             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             t_ofl += wraparound
 *             continue
 */
    __pyx_t_3 = __pyx_v_k;
    __pyx_t_4 = (((*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer.buf, __pyx_t_3, __pyx_pybuffernd_channel.diminfo[0].strides)) == 63) != 0);
    if (__pyx_t_4) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line233")'> 233:             t_ofl += wraparound</pre>
<pre id='line233' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":233
 *     for k in range(length):
 *         if channel[k] == 63:
 *             t_ofl += wraparound             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             continue
 * 
 */
      __pyx_v_t_ofl = (__pyx_v_t_ofl + __pyx_v_wraparound);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line234")'> 234:             continue</pre>
<pre id='line234' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":234
 *         if channel[k] == 63:
 *             t_ofl += wraparound
 *             continue             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 * 
 *         # syncs are basically pointless -- we only need for each element the time
 */
      goto __pyx_L3_continue;
      goto __pyx_L5;
    }
    __pyx_L5:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line235")'> 235: </pre>
<pre id='line235' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line236")'> 236:         # syncs are basically pointless -- we only need for each element the time</pre>
<pre id='line236' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line237")'> 237:         # since the last sync; also, save the sync number, this can be handy for</pre>
<pre id='line237' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line238")'> 238:         # filtering</pre>
<pre id='line238' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line239")'> 239:         if special[k] == 1:</pre>
<pre id='line239' class='code' style='background-color: #FFFFff'>
    /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":239
 *         # since the last sync; also, save the sync number, this can be handy for
 *         # filtering
 *         if special[k] == 1:             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             if channel[k] == 0:
 *                 if (np.mod(last_sync_number,2)==1):
 */
    __pyx_t_5 = __pyx_v_k;
    __pyx_t_4 = (((*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_special.rcbuffer-&gt;pybuffer.buf, __pyx_t_5, __pyx_pybuffernd_special.diminfo[0].strides)) == 1) != 0);
    if (__pyx_t_4) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line240")'> 240:             if channel[k] == 0:</pre>
<pre id='line240' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":240
 *         # filtering
 *         if special[k] == 1:
 *             if channel[k] == 0:             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *                 if (np.mod(last_sync_number,2)==1):
 *                     cur_sync=(time[k] + t_ofl) / t2_time_factor
 */
      __pyx_t_6 = __pyx_v_k;
      __pyx_t_4 = (((*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer.buf, __pyx_t_6, __pyx_pybuffernd_channel.diminfo[0].strides)) == 0) != 0);
      if (__pyx_t_4) {
</pre><pre class='line' style='background-color: #FFFF38' onclick='toggleDiv("line241")'> 241:                 if (np.mod(last_sync_number,2)==1):</pre>
<pre id='line241' class='code' style='background-color: #FFFF38'>
        /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":241
 *         if special[k] == 1:
 *             if channel[k] == 0:
 *                 if (np.mod(last_sync_number,2)==1):             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *                     cur_sync=(time[k] + t_ofl) / t2_time_factor
 *                     if(cur_sync&lt;t_lastsync):
 */
        __pyx_t_7 = <span class='pyx_c_api'>__Pyx_GetModuleGlobalName</span>(__pyx_n_s__np);<span class='error_goto'> if (unlikely(!__pyx_t_7)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 241; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
        <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_7);
        __pyx_t_8 = __Pyx_<span class='py_c_api'>PyObject_GetAttrStr</span>(__pyx_t_7, __pyx_n_s__mod);<span class='error_goto'> if (unlikely(!__pyx_t_8)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 241; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
        <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_8);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_t_7 = __Pyx_PyInt_to_py_npy_uint64(__pyx_v_last_sync_number);<span class='error_goto'> if (unlikely(!__pyx_t_7)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 241; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
        <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_7);
        __pyx_t_9 = <span class='py_c_api'>PyTuple_New</span>(2);<span class='error_goto'> if (unlikely(!__pyx_t_9)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 241; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
        <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_9);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 0, __pyx_t_7);
        <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_7);
        <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_int_2);
        <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 1, __pyx_int_2);
        <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_int_2);
        __pyx_t_7 = 0;
        __pyx_t_7 = <span class='py_c_api'>PyObject_Call</span>(__pyx_t_8, ((PyObject *)__pyx_t_9), NULL);<span class='error_goto'> if (unlikely(!__pyx_t_7)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 241; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
        <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_7);
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_t_9)); __pyx_t_9 = 0;
        __pyx_t_9 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_t_7, __pyx_int_1, Py_EQ); <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGOTREF</span></span>(__pyx_t_9);<span class='error_goto'> if (unlikely(!__pyx_t_9)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 241; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
        __pyx_t_4 = __Pyx_<span class='py_c_api'>PyObject_IsTrue</span>(__pyx_t_9);<span class='error_goto'> if (unlikely(__pyx_t_4 &lt; 0)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 241; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
        <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
        if (__pyx_t_4) {
</pre><pre class='line' style='background-color: #FFFF9f' onclick='toggleDiv("line242")'> 242:                     cur_sync=(time[k] + t_ofl) / t2_time_factor</pre>
<pre id='line242' class='code' style='background-color: #FFFF9f'>
          /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":242
 *             if channel[k] == 0:
 *                 if (np.mod(last_sync_number,2)==1):
 *                     cur_sync=(time[k] + t_ofl) / t2_time_factor             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *                     if(cur_sync&lt;t_lastsync):
 *                         dt=cur_sync + 2**32 - t_lastsync
 */
          __pyx_t_10 = __pyx_v_k;
          __pyx_t_11 = ((*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_time.rcbuffer-&gt;pybuffer.buf, __pyx_t_10, __pyx_pybuffernd_time.diminfo[0].strides)) + __pyx_v_t_ofl);
          if (unlikely(__pyx_v_t2_time_factor == 0)) {
            #ifdef WITH_THREAD
            PyGILState_STATE __pyx_gilstate_save = PyGILState_Ensure();
            #endif
            <span class='py_c_api'>PyErr_Format</span>(PyExc_ZeroDivisionError, "integer division or modulo by zero");
            #ifdef WITH_THREAD
            PyGILState_Release(__pyx_gilstate_save);
            #endif
           <span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 242; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
          }
          __pyx_t_9 = __Pyx_PyInt_to_py_npy_uint64((__pyx_t_11 / __pyx_v_t2_time_factor));<span class='error_goto'> if (unlikely(!__pyx_t_9)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 242; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
          <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_9);
          <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_cur_sync, __pyx_t_9);
          __pyx_t_9 = 0;
</pre><pre class='line' style='background-color: #FFFF73' onclick='toggleDiv("line243")'> 243:                     if(cur_sync&lt;t_lastsync):</pre>
<pre id='line243' class='code' style='background-color: #FFFF73'>
          /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":243
 *                 if (np.mod(last_sync_number,2)==1):
 *                     cur_sync=(time[k] + t_ofl) / t2_time_factor
 *                     if(cur_sync&lt;t_lastsync):             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *                         dt=cur_sync + 2**32 - t_lastsync
 *                     else:
 */
          __pyx_t_9 = __Pyx_PyInt_to_py_npy_uint64(__pyx_v_t_lastsync);<span class='error_goto'> if (unlikely(!__pyx_t_9)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 243; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
          <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_9);
          __pyx_t_7 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_v_cur_sync, __pyx_t_9, Py_LT); <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGOTREF</span></span>(__pyx_t_7);<span class='error_goto'> if (unlikely(!__pyx_t_7)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 243; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
          __pyx_t_4 = __Pyx_<span class='py_c_api'>PyObject_IsTrue</span>(__pyx_t_7);<span class='error_goto'> if (unlikely(__pyx_t_4 &lt; 0)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 243; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
          if (__pyx_t_4) {
</pre><pre class='line' style='background-color: #FFFF6e' onclick='toggleDiv("line244")'> 244:                         dt=cur_sync + 2**32 - t_lastsync</pre>
<pre id='line244' class='code' style='background-color: #FFFF6e'>
            /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":244
 *                     cur_sync=(time[k] + t_ofl) / t2_time_factor
 *                     if(cur_sync&lt;t_lastsync):
 *                         dt=cur_sync + 2**32 - t_lastsync             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *                     else:
 *                         dt=cur_sync - t_lastsync
 */
            __pyx_t_7 = <span class='py_c_api'>PyNumber_Add</span>(__pyx_v_cur_sync, __pyx_int_4294967296);<span class='error_goto'> if (unlikely(!__pyx_t_7)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 244; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
            <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_7);
            __pyx_t_9 = __Pyx_PyInt_to_py_npy_uint64(__pyx_v_t_lastsync);<span class='error_goto'> if (unlikely(!__pyx_t_9)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 244; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
            <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_9);
            __pyx_t_8 = <span class='py_c_api'>PyNumber_Subtract</span>(__pyx_t_7, __pyx_t_9);<span class='error_goto'> if (unlikely(!__pyx_t_8)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 244; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
            <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_8);
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_7); __pyx_t_7 = 0;
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
            <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_dt, __pyx_t_8);
            __pyx_t_8 = 0;
            goto __pyx_L9;
          }
          /*else*/ {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line245")'> 245:                     else:</pre>
<pre id='line245' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF96' onclick='toggleDiv("line246")'> 246:                         dt=cur_sync - t_lastsync</pre>
<pre id='line246' class='code' style='background-color: #FFFF96'>
            /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":246
 *                         dt=cur_sync + 2**32 - t_lastsync
 *                     else:
 *                         dt=cur_sync - t_lastsync             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 * 
 *                     if (dt&gt;dt_sync_time):    # meaning a sync was lost
 */
            __pyx_t_8 = __Pyx_PyInt_to_py_npy_uint64(__pyx_v_t_lastsync);<span class='error_goto'> if (unlikely(!__pyx_t_8)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 246; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
            <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_8);
            __pyx_t_9 = <span class='py_c_api'>PyNumber_Subtract</span>(__pyx_v_cur_sync, __pyx_t_8);<span class='error_goto'> if (unlikely(!__pyx_t_9)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 246; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
            <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_9);
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
            <span class='pyx_macro_api'>__Pyx_XDECREF_SET</span>(__pyx_v_dt, __pyx_t_9);
            __pyx_t_9 = 0;
          }
          __pyx_L9:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line247")'> 247: </pre>
<pre id='line247' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF73' onclick='toggleDiv("line248")'> 248:                     if (dt&gt;dt_sync_time):    # meaning a sync was lost</pre>
<pre id='line248' class='code' style='background-color: #FFFF73'>
          /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":248
 *                         dt=cur_sync - t_lastsync
 * 
 *                     if (dt&gt;dt_sync_time):    # meaning a sync was lost             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *                         print 'Lost a sync at: ', last_sync_number, '  dt = ',dt
 *                         t_lastsync = cur_sync # the factor 2 comes from an extra bit. see HH docs.
 */
          __pyx_t_9 = __Pyx_PyInt_to_py_npy_uint64(__pyx_v_dt_sync_time);<span class='error_goto'> if (unlikely(!__pyx_t_9)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 248; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
          <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_9);
          __pyx_t_8 = <span class='py_c_api'>PyObject_RichCompare</span>(__pyx_v_dt, __pyx_t_9, Py_GT); <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGOTREF</span></span>(__pyx_t_8);<span class='error_goto'> if (unlikely(!__pyx_t_8)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 248; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_9); __pyx_t_9 = 0;
          __pyx_t_4 = __Pyx_<span class='py_c_api'>PyObject_IsTrue</span>(__pyx_t_8);<span class='error_goto'> if (unlikely(__pyx_t_4 &lt; 0)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 248; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
          <span class='pyx_macro_api'>__Pyx_DECREF</span>(__pyx_t_8); __pyx_t_8 = 0;
          if (__pyx_t_4) {
</pre><pre class='line' style='background-color: #FFFF66' onclick='toggleDiv("line249")'> 249:                         print 'Lost a sync at: ', last_sync_number, '  dt = ',dt</pre>
<pre id='line249' class='code' style='background-color: #FFFF66'>
            /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":249
 * 
 *                     if (dt&gt;dt_sync_time):    # meaning a sync was lost
 *                         print 'Lost a sync at: ', last_sync_number, '  dt = ',dt             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *                         t_lastsync = cur_sync # the factor 2 comes from an extra bit. see HH docs.
 *                         last_sync_number += 2
 */
            __pyx_t_8 = __Pyx_PyInt_to_py_npy_uint64(__pyx_v_last_sync_number);<span class='error_goto'> if (unlikely(!__pyx_t_8)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 249; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
            <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_8);
            __pyx_t_9 = <span class='py_c_api'>PyTuple_New</span>(4);<span class='error_goto'> if (unlikely(!__pyx_t_9)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 249; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
            <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_9);
            <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_kp_s_2));
            <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 0, ((PyObject *)__pyx_kp_s_2));
            <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_kp_s_2));
            <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 1, __pyx_t_8);
            <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_8);
            <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_kp_s_3));
            <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 2, ((PyObject *)__pyx_kp_s_3));
            <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_kp_s_3));
            <span class='pyx_macro_api'>__Pyx_INCREF</span>(__pyx_v_dt);
            <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_9, 3, __pyx_v_dt);
            <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_v_dt);
            __pyx_t_8 = 0;
            if (<span class='pyx_c_api'>__Pyx_Print</span>(0, ((PyObject *)__pyx_t_9), 1) &lt; 0)<span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 249; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
            <span class='pyx_macro_api'>__Pyx_DECREF</span>(((PyObject *)__pyx_t_9)); __pyx_t_9 = 0;
</pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line250")'> 250:                         t_lastsync = cur_sync # the factor 2 comes from an extra bit. see HH docs.</pre>
<pre id='line250' class='code' style='background-color: #FFFFaa'>
            /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":250
 *                     if (dt&gt;dt_sync_time):    # meaning a sync was lost
 *                         print 'Lost a sync at: ', last_sync_number, '  dt = ',dt
 *                         t_lastsync = cur_sync # the factor 2 comes from an extra bit. see HH docs.             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *                         last_sync_number += 2
 *                     else:
 */
            __pyx_t_11 = __Pyx_PyInt_from_py_npy_uint64(__pyx_v_cur_sync);<span class='error_goto'> if (unlikely((__pyx_t_11 == (npy_uint64)-1) &amp;&amp; <span class='py_c_api'>PyErr_Occurred</span>())) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 250; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
            __pyx_v_t_lastsync = __pyx_t_11;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line251")'> 251:                         last_sync_number += 2</pre>
<pre id='line251' class='code' style='background-color: #FFFFff'>
            /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":251
 *                         print 'Lost a sync at: ', last_sync_number, '  dt = ',dt
 *                         t_lastsync = cur_sync # the factor 2 comes from an extra bit. see HH docs.
 *                         last_sync_number += 2             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *                     else:
 *                         last_sync_number+=1
 */
            __pyx_v_last_sync_number = (__pyx_v_last_sync_number + 2);
            goto __pyx_L10;
          }
          /*else*/ {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line252")'> 252:                     else:</pre>
<pre id='line252' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line253")'> 253:                         last_sync_number+=1</pre>
<pre id='line253' class='code' style='background-color: #FFFFff'>
            /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":253
 *                         last_sync_number += 2
 *                     else:
 *                         last_sync_number+=1             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *                 else:
 * 
 */
            __pyx_v_last_sync_number = (__pyx_v_last_sync_number + 1);
          }
          __pyx_L10:;
          goto __pyx_L8;
        }
        /*else*/ {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line254")'> 254:                 else:</pre>
<pre id='line254' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line255")'> 255: </pre>
<pre id='line255' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line256")'> 256:                     t_lastsync = (time[k] + t_ofl) / t2_time_factor # the factor 2 comes from an extra bit. see HH docs.</pre>
<pre id='line256' class='code' style='background-color: #FFFFaa'>
          /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":256
 *                 else:
 * 
 *                     t_lastsync = (time[k] + t_ofl) / t2_time_factor # the factor 2 comes from an extra bit. see HH docs.             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *                     last_sync_number += 1
 *             continue
 */
          __pyx_t_11 = __pyx_v_k;
          __pyx_t_12 = ((*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_time.rcbuffer-&gt;pybuffer.buf, __pyx_t_11, __pyx_pybuffernd_time.diminfo[0].strides)) + __pyx_v_t_ofl);
          if (unlikely(__pyx_v_t2_time_factor == 0)) {
            #ifdef WITH_THREAD
            PyGILState_STATE __pyx_gilstate_save = PyGILState_Ensure();
            #endif
            <span class='py_c_api'>PyErr_Format</span>(PyExc_ZeroDivisionError, "integer division or modulo by zero");
            #ifdef WITH_THREAD
            PyGILState_Release(__pyx_gilstate_save);
            #endif
           <span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 256; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
          }
          __pyx_v_t_lastsync = (__pyx_t_12 / __pyx_v_t2_time_factor);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line257")'> 257:                     last_sync_number += 1</pre>
<pre id='line257' class='code' style='background-color: #FFFFff'>
          /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":257
 * 
 *                     t_lastsync = (time[k] + t_ofl) / t2_time_factor # the factor 2 comes from an extra bit. see HH docs.
 *                     last_sync_number += 1             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             continue
 * 
 */
          __pyx_v_last_sync_number = (__pyx_v_last_sync_number + 1);
        }
        __pyx_L8:;
        goto __pyx_L7;
      }
      __pyx_L7:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line258")'> 258:             continue</pre>
<pre id='line258' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":258
 *                     t_lastsync = (time[k] + t_ofl) / t2_time_factor # the factor 2 comes from an extra bit. see HH docs.
 *                     last_sync_number += 1
 *             continue             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 * 
 *         _sync_time = (t_ofl + time[k]) / t2_time_factor  - t_lastsync
 */
      goto __pyx_L3_continue;
      goto __pyx_L6;
    }
    __pyx_L6:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line259")'> 259: </pre>
<pre id='line259' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFFaa' onclick='toggleDiv("line260")'> 260:         _sync_time = (t_ofl + time[k]) / t2_time_factor  - t_lastsync</pre>
<pre id='line260' class='code' style='background-color: #FFFFaa'>
    /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":260
 *             continue
 * 
 *         _sync_time = (t_ofl + time[k]) / t2_time_factor  - t_lastsync             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *         if _sync_time &lt; min_sync_time or _sync_time &gt; max_sync_time:
 *             continue
 */
    __pyx_t_12 = __pyx_v_k;
    __pyx_t_13 = (__pyx_v_t_ofl + (*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_time.rcbuffer-&gt;pybuffer.buf, __pyx_t_12, __pyx_pybuffernd_time.diminfo[0].strides)));
    if (unlikely(__pyx_v_t2_time_factor == 0)) {
      #ifdef WITH_THREAD
      PyGILState_STATE __pyx_gilstate_save = PyGILState_Ensure();
      #endif
      <span class='py_c_api'>PyErr_Format</span>(PyExc_ZeroDivisionError, "integer division or modulo by zero");
      #ifdef WITH_THREAD
      PyGILState_Release(__pyx_gilstate_save);
      #endif
     <span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 260; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    }
    __pyx_v__sync_time = ((__pyx_t_13 / __pyx_v_t2_time_factor) - __pyx_v_t_lastsync);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line261")'> 261:         if _sync_time &lt; min_sync_time or _sync_time &gt; max_sync_time:</pre>
<pre id='line261' class='code' style='background-color: #FFFFff'>
    /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":261
 * 
 *         _sync_time = (t_ofl + time[k]) / t2_time_factor  - t_lastsync
 *         if _sync_time &lt; min_sync_time or _sync_time &gt; max_sync_time:             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             continue
 *         _sweep_idx=((last_sync_number-1)/syncs_per_sweep) % sweep_length
 */
    __pyx_t_4 = ((__pyx_v__sync_time &lt; __pyx_v_min_sync_time) != 0);
    if (!__pyx_t_4) {
      __pyx_t_14 = ((__pyx_v__sync_time &gt; __pyx_v_max_sync_time) != 0);
      __pyx_t_15 = __pyx_t_14;
    } else {
      __pyx_t_15 = __pyx_t_4;
    }
    if (__pyx_t_15) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line262")'> 262:             continue</pre>
<pre id='line262' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":262
 *         _sync_time = (t_ofl + time[k]) / t2_time_factor  - t_lastsync
 *         if _sync_time &lt; min_sync_time or _sync_time &gt; max_sync_time:
 *             continue             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *         _sweep_idx=((last_sync_number-1)/syncs_per_sweep) % sweep_length
 *         if channel[k] == 0:
 */
      goto __pyx_L3_continue;
      goto __pyx_L11;
    }
    __pyx_L11:;
</pre><pre class='line' style='background-color: #FFFF7f' onclick='toggleDiv("line263")'> 263:         _sweep_idx=((last_sync_number-1)/syncs_per_sweep) % sweep_length</pre>
<pre id='line263' class='code' style='background-color: #FFFF7f'>
    /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":263
 *         if _sync_time &lt; min_sync_time or _sync_time &gt; max_sync_time:
 *             continue
 *         _sweep_idx=((last_sync_number-1)/syncs_per_sweep) % sweep_length             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *         if channel[k] == 0:
 *             hist0[_sync_time,_sweep_idx] += 1
 */
    __pyx_t_13 = (__pyx_v_last_sync_number - 1);
    if (unlikely(__pyx_v_syncs_per_sweep == 0)) {
      #ifdef WITH_THREAD
      PyGILState_STATE __pyx_gilstate_save = PyGILState_Ensure();
      #endif
      <span class='py_c_api'>PyErr_Format</span>(PyExc_ZeroDivisionError, "integer division or modulo by zero");
      #ifdef WITH_THREAD
      PyGILState_Release(__pyx_gilstate_save);
      #endif
     <span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 263; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    }
    __pyx_t_16 = (__pyx_t_13 / __pyx_v_syncs_per_sweep);
    if (unlikely(__pyx_v_sweep_length == 0)) {
      #ifdef WITH_THREAD
      PyGILState_STATE __pyx_gilstate_save = PyGILState_Ensure();
      #endif
      <span class='py_c_api'>PyErr_Format</span>(PyExc_ZeroDivisionError, "integer division or modulo by zero");
      #ifdef WITH_THREAD
      PyGILState_Release(__pyx_gilstate_save);
      #endif
     <span class='error_goto'> {__pyx_filename = __pyx_f[0]; __pyx_lineno = 263; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
    }
    __pyx_v__sweep_idx = (__pyx_t_16 % __pyx_v_sweep_length);
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line264")'> 264:         if channel[k] == 0:</pre>
<pre id='line264' class='code' style='background-color: #FFFFff'>
    /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":264
 *             continue
 *         _sweep_idx=((last_sync_number-1)/syncs_per_sweep) % sweep_length
 *         if channel[k] == 0:             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             hist0[_sync_time,_sweep_idx] += 1
 *         elif channel[k] == 1:
 */
    __pyx_t_16 = __pyx_v_k;
    __pyx_t_15 = (((*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer.buf, __pyx_t_16, __pyx_pybuffernd_channel.diminfo[0].strides)) == 0) != 0);
    if (__pyx_t_15) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line265")'> 265:             hist0[_sync_time,_sweep_idx] += 1</pre>
<pre id='line265' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":265
 *         _sweep_idx=((last_sync_number-1)/syncs_per_sweep) % sweep_length
 *         if channel[k] == 0:
 *             hist0[_sync_time,_sweep_idx] += 1             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *         elif channel[k] == 1:
 *             hist1[_sync_time,_sweep_idx] += 1
 */
      __pyx_t_13 = __pyx_v__sync_time;
      __pyx_t_17 = __pyx_v__sweep_idx;
      *__Pyx_BufPtrCContig2d(__pyx_t_5numpy_uint8_t *, __pyx_pybuffernd_hist0.rcbuffer-&gt;pybuffer.buf, __pyx_t_13, __pyx_pybuffernd_hist0.diminfo[0].strides, __pyx_t_17, __pyx_pybuffernd_hist0.diminfo[1].strides) += 1;
      goto __pyx_L12;
    }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line266")'> 266:         elif channel[k] == 1:</pre>
<pre id='line266' class='code' style='background-color: #FFFFff'>
    /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":266
 *         if channel[k] == 0:
 *             hist0[_sync_time,_sweep_idx] += 1
 *         elif channel[k] == 1:             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *             hist1[_sync_time,_sweep_idx] += 1
 *         l += 1
 */
    __pyx_t_18 = __pyx_v_k;
    __pyx_t_15 = (((*__Pyx_BufPtrCContig1d(__pyx_t_5numpy_uint32_t *, __pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer.buf, __pyx_t_18, __pyx_pybuffernd_channel.diminfo[0].strides)) == 1) != 0);
    if (__pyx_t_15) {
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line267")'> 267:             hist1[_sync_time,_sweep_idx] += 1</pre>
<pre id='line267' class='code' style='background-color: #FFFFff'>
      /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":267
 *             hist0[_sync_time,_sweep_idx] += 1
 *         elif channel[k] == 1:
 *             hist1[_sync_time,_sweep_idx] += 1             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 *         l += 1
 * 
 */
      __pyx_t_19 = __pyx_v__sync_time;
      __pyx_t_20 = __pyx_v__sweep_idx;
      *__Pyx_BufPtrCContig2d(__pyx_t_5numpy_uint8_t *, __pyx_pybuffernd_hist1.rcbuffer-&gt;pybuffer.buf, __pyx_t_19, __pyx_pybuffernd_hist1.diminfo[0].strides, __pyx_t_20, __pyx_pybuffernd_hist1.diminfo[1].strides) += 1;
      goto __pyx_L12;
    }
    __pyx_L12:;
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line268")'> 268:         l += 1</pre>
<pre id='line268' class='code' style='background-color: #FFFFff'>
    /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":268
 *         elif channel[k] == 1:
 *             hist1[_sync_time,_sweep_idx] += 1
 *         l += 1             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 * 
 *     return hist0, hist1, l, t_ofl, t_lastsync, last_sync_number
 */
    __pyx_v_l = (__pyx_v_l + 1);
    __pyx_L3_continue:;
  }
</pre><pre class='line' style='background-color: #FFFFff' onclick='toggleDiv("line269")'> 269: </pre>
<pre id='line269' class='code' style='background-color: #FFFFff'></pre><pre class='line' style='background-color: #FFFF2a' onclick='toggleDiv("line270")'> 270:     return hist0, hist1, l, t_ofl, t_lastsync, last_sync_number</pre>
<pre id='line270' class='code' style='background-color: #FFFF2a'>
  /* "measurement\lib\cython\PQ_T2_tools\T2_tools_src\T2_tools_v3.pyx":270
 *         l += 1
 * 
 *     return hist0, hist1, l, t_ofl, t_lastsync, last_sync_number             # &lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;&lt;
 */
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_r);
  __pyx_t_9 = __Pyx_PyInt_to_py_npy_uint64(__pyx_v_l);<span class='error_goto'> if (unlikely(!__pyx_t_9)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 270; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_9);
  __pyx_t_8 = __Pyx_PyInt_to_py_npy_uint64(__pyx_v_t_ofl);<span class='error_goto'> if (unlikely(!__pyx_t_8)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 270; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_8);
  __pyx_t_7 = __Pyx_PyInt_to_py_npy_uint64(__pyx_v_t_lastsync);<span class='error_goto'> if (unlikely(!__pyx_t_7)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 270; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_7);
  __pyx_t_21 = __Pyx_PyInt_to_py_npy_uint64(__pyx_v_last_sync_number);<span class='error_goto'> if (unlikely(!__pyx_t_21)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 270; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_21);
  __pyx_t_22 = <span class='py_c_api'>PyTuple_New</span>(6);<span class='error_goto'> if (unlikely(!__pyx_t_22)) {__pyx_filename = __pyx_f[0]; __pyx_lineno = 270; __pyx_clineno = __LINE__; goto __pyx_L1_error;}</span>
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GOTREF</span></span>(__pyx_t_22);
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_hist0));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_22, 0, ((PyObject *)__pyx_v_hist0));
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_v_hist0));
  <span class='pyx_macro_api'>__Pyx_INCREF</span>(((PyObject *)__pyx_v_hist1));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_22, 1, ((PyObject *)__pyx_v_hist1));
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(((PyObject *)__pyx_v_hist1));
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_22, 2, __pyx_t_9);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_9);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_22, 3, __pyx_t_8);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_8);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_22, 4, __pyx_t_7);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_7);
  <span class='py_macro_api'>PyTuple_SET_ITEM</span>(__pyx_t_22, 5, __pyx_t_21);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_GIVEREF</span></span>(__pyx_t_21);
  __pyx_t_9 = 0;
  __pyx_t_8 = 0;
  __pyx_t_7 = 0;
  __pyx_t_21 = 0;
  __pyx_r = ((PyObject *)__pyx_t_22);
  __pyx_t_22 = 0;
  goto __pyx_L0;

  __pyx_r = Py_None; <span class='pyx_macro_api'>__Pyx_INCREF</span>(Py_None);
  goto __pyx_L0;
  __pyx_L1_error:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_7);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_8);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_9);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_21);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_t_22);
  { PyObject *__pyx_type, *__pyx_value, *__pyx_tb;
    <span class='pyx_c_api'>__Pyx_ErrFetch</span>(&amp;__pyx_type, &amp;__pyx_value, &amp;__pyx_tb);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_hist0.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_hist1.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_special.rcbuffer-&gt;pybuffer);
    <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_time.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_ErrRestore</span>(__pyx_type, __pyx_value, __pyx_tb);}
  <span class='pyx_c_api'>__Pyx_AddTraceback</span>("measurement.lib.cython.PQ_T2_tools.T2_tools_src.T2_tools_v3.T2_live_filter_integrated_RT", __pyx_clineno, __pyx_lineno, __pyx_filename);
  __pyx_r = NULL;
  goto __pyx_L2;
  __pyx_L0:;
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_channel.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_hist0.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_hist1.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_special.rcbuffer-&gt;pybuffer);
  <span class='pyx_c_api'>__Pyx_SafeReleaseBuffer</span>(&amp;__pyx_pybuffernd_time.rcbuffer-&gt;pybuffer);
  __pyx_L2:;
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_cur_sync);
  <span class='pyx_macro_api'>__Pyx_XDECREF</span>(__pyx_v_dt);
  <span class='pyx_macro_api'><span class='refnanny'>__Pyx_XGIVEREF</span></span>(__pyx_r);
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}

/* Python wrapper */
static CYTHON_UNUSED int __pyx_pw_5numpy_7ndarray_1__getbuffer__(PyObject *__pyx_v_self, Py_buffer *__pyx_v_info, int __pyx_v_flags); /*proto*/
static CYTHON_UNUSED int __pyx_pw_5numpy_7ndarray_1__getbuffer__(PyObject *__pyx_v_self, Py_buffer *__pyx_v_info, int __pyx_v_flags) {
  int __pyx_r;
  <span class='refnanny'>__Pyx_RefNannyDeclarations</span>
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannySetupContext</span></span>("__getbuffer__ (wrapper)", 0);
  __pyx_r = __pyx_pf_5numpy_7ndarray___getbuffer__(((PyArrayObject *)__pyx_v_self), ((Py_buffer *)__pyx_v_info), ((int)__pyx_v_flags));
  <span class='pyx_c_api'><span class='refnanny'>__Pyx_RefNannyFinishContext</span></span>();
  return __pyx_r;
}
</pre></body></html>
